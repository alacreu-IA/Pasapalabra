<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>PasaPalabra Pro</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Sans:wght@300;400;500&display=swap');
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
:root{--bg:#0a0a0f;--card:#13131a;--card2:#1a1a24;--border:#2a2a38;--gold:#f5c842;--gold2:#e8a800;--blue:#4a9eff;--green:#3ecf72;--red:#ff5555;--text:#f0f0f5;--text2:#8888a8;--r:16px;}
html,body{height:100%;background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;overflow:hidden;}
#app{height:100%;position:relative;}
.screen{position:absolute;inset:0;display:flex;flex-direction:column;opacity:0;pointer-events:none;transition:opacity .2s,transform .2s;transform:translateY(12px);overflow-y:auto;overflow-x:hidden;}
.screen.active{opacity:1;pointer-events:all;transform:translateY(0);}
/* HOME */
.home-top{padding:28px 20px 20px;background:linear-gradient(160deg,#13131a,#0d0d15);border-bottom:1px solid var(--border);}
.app-title{font-family:'Syne',sans-serif;font-size:26px;font-weight:800;letter-spacing:-1px;}
.app-title span{color:var(--gold);}
.app-sub{font-size:12px;color:var(--text2);margin-top:2px;}
.stats-row{display:flex;gap:10px;margin-top:16px;}
.stat-box{flex:1;background:var(--card2);border:1px solid var(--border);border-radius:12px;padding:10px;text-align:center;}
.stat-val{font-family:'Syne',sans-serif;font-size:20px;font-weight:700;color:var(--gold);}
.stat-lbl{font-size:10px;color:var(--text2);margin-top:2px;text-transform:uppercase;letter-spacing:.4px;}
.streak-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(245,200,66,.1);border:1px solid rgba(245,200,66,.3);border-radius:20px;padding:5px 12px;font-size:12px;color:var(--gold);margin-top:10px;}
.home-body{padding:16px;}
.sec-title{font-family:'Syne',sans-serif;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--text2);margin-bottom:10px;}
.mode-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:18px;}
.mc{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px;cursor:pointer;transition:all .15s;display:flex;flex-direction:column;gap:6px;position:relative;overflow:hidden;}
.mc:active{transform:scale(.97);}
.mc-icon{font-size:22px;}
.mc-name{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;}
.mc-desc{font-size:11px;color:var(--text2);line-height:1.4;}
.mc-badge{position:absolute;top:8px;right:8px;background:var(--gold);color:#000;font-size:9px;font-weight:700;padding:2px 6px;border-radius:20px;font-family:'Syne',sans-serif;}
.deck-list{display:flex;flex-direction:column;gap:7px;margin-bottom:16px;}
.di{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 14px;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .15s;}
.di:active{transform:scale(.98);}
.di.sel{border-color:var(--gold);background:rgba(245,200,66,.06);}
.di-icon{font-size:18px;width:28px;text-align:center;}
.di-name{font-size:13px;font-weight:500;flex:1;}
.di-ct{font-size:11px;color:var(--text2);}
.di-chk{width:20px;height:20px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:11px;transition:all .15s;}
.di.sel .di-chk{background:var(--gold);border-color:var(--gold);color:#000;}
.btn-start{width:100%;background:var(--gold);color:#000;border:none;border-radius:12px;padding:14px;font-family:'Syne',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:all .15s;margin-bottom:7px;}
.btn-start:active{transform:scale(.98);}
.nav-row{display:flex;gap:7px;margin-bottom:20px;}
.nav-btn{flex:1;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:11px;text-align:center;font-size:12px;color:var(--text2);cursor:pointer;transition:all .15s;}
.nav-btn:active{background:var(--card2);}
/* TOPBAR */
.topbar{display:flex;align-items:center;gap:12px;padding:14px 16px;background:var(--card);border-bottom:1px solid var(--border);flex-shrink:0;}
.btn-back{width:34px;height:34px;background:var(--card2);border:1px solid var(--border);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:15px;transition:all .15s;flex-shrink:0;}
.btn-back:active{transform:scale(.9);}
.pw{flex:1;height:5px;background:var(--border);border-radius:3px;overflow:hidden;}
.pb{height:100%;background:linear-gradient(90deg,var(--gold),var(--gold2));border-radius:3px;transition:width .4s ease;}
.pt{font-size:12px;color:var(--text2);white-space:nowrap;font-family:'Syne',sans-serif;}
/* TRAIN */
.tbody{flex:1;padding:16px;display:flex;flex-direction:column;gap:14px;overflow-y:auto;}
.dtag{display:inline-flex;align-items:center;gap:5px;background:var(--card2);border:1px solid var(--border);border-radius:20px;padding:4px 10px;font-size:11px;color:var(--text2);width:fit-content;}
.qcard{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px;min-height:140px;display:flex;flex-direction:column;justify-content:center;}
.qlbl{font-size:10px;text-transform:uppercase;letter-spacing:.7px;color:var(--text2);margin-bottom:8px;font-family:'Syne',sans-serif;}
.qtxt{font-size:17px;line-height:1.6;}
.awrap{display:flex;gap:7px;}
.ai{flex:1;background:var(--card2);border:2px solid var(--border);border-radius:11px;padding:13px 14px;color:var(--text);font-size:16px;font-family:'DM Sans',sans-serif;outline:none;transition:border-color .15s;}
.ai:focus{border-color:var(--gold);}
.ai.ok{border-color:var(--green);background:rgba(62,207,114,.08);}
.ai.bad{border-color:var(--red);background:rgba(255,85,85,.08);}
.btn-sub{background:var(--gold);color:#000;border:none;border-radius:11px;padding:13px 18px;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;cursor:pointer;transition:all .15s;}
.btn-sub:active{transform:scale(.96);}
.fb{border-radius:11px;padding:0;max-height:0;overflow:hidden;transition:max-height .3s,padding .3s,opacity .3s;opacity:0;}
.fb.show{padding:14px;max-height:200px;opacity:1;}
.fb.ok{background:rgba(62,207,114,.1);border:1px solid rgba(62,207,114,.3);}
.fb.bad{background:rgba(255,85,85,.1);border:1px solid rgba(255,85,85,.3);}
.fb-ans{font-size:14px;font-weight:500;white-space:pre-line;line-height:1.6;}
/* ANKI buttons */
.anki-row{display:none;gap:7px;}
.anki-row.show{display:flex;}
.abtn{flex:1;border:none;border-radius:11px;padding:11px 6px;font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer;transition:all .15s;display:flex;flex-direction:column;align-items:center;gap:2px;}
.abtn:active{transform:scale(.96);}
.abtn .al{font-size:10px;font-weight:400;opacity:.75;}
.ba{background:rgba(255,85,85,.2);color:var(--red);border:1px solid rgba(255,85,85,.3);}
.bh{background:rgba(245,200,66,.15);color:var(--gold);border:1px solid rgba(245,200,66,.3);}
.bg{background:rgba(74,158,255,.2);color:var(--blue);border:1px solid rgba(74,158,255,.3);}
.be{background:rgba(62,207,114,.2);color:var(--green);border:1px solid rgba(62,207,114,.3);}
.skip-h{text-align:center;font-size:11px;color:var(--text2);cursor:pointer;padding-top:2px;}
/* VOCAB */
.vcbody{flex:1;padding:16px;display:flex;flex-direction:column;gap:10px;overflow-y:auto;}
.vcard{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px;flex:1;min-height:200px;display:flex;flex-direction:column;cursor:pointer;transition:all .2s;position:relative;}
.vcard::after{content:'Toca para ver respuesta';position:absolute;bottom:12px;right:14px;font-size:10px;color:var(--text2);opacity:.5;}
.vcard.flipped::after{display:none;}
.vc-lbl{font-size:10px;text-transform:uppercase;letter-spacing:.7px;color:var(--text2);margin-bottom:10px;font-family:'Syne',sans-serif;}
.vc-front{display:flex;flex-direction:column;flex:1;}
.vc-back{display:none;flex-direction:column;flex:1;}
.vcard.flipped .vc-front{display:none;}
.vcard.flipped .vc-back{display:flex;}
.vword{font-family:'Syne',sans-serif;font-size:30px;font-weight:800;color:var(--gold);margin-bottom:6px;}
.vdef{white-space:pre-line;font-size:14px;line-height:1.6;}
.vtags{display:flex;flex-wrap:wrap;gap:5px;margin-top:10px;}
.vtag{background:var(--card2);border:1px solid var(--border);border-radius:20px;padding:3px 8px;font-size:10px;color:var(--text2);}
.vib{background:var(--card2);border:1px solid var(--border);border-radius:8px;padding:9px 12px;margin-top:8px;font-size:12px;line-height:1.6;}
.vib .vl{font-size:9px;text-transform:uppercase;letter-spacing:.5px;color:var(--text2);margin-bottom:3px;font-family:'Syne',sans-serif;}
.vib.vsin{border-color:rgba(74,158,255,.3);color:var(--blue);}
.vib.vtip{border-color:rgba(245,200,66,.3);color:var(--gold);}
.rae-btn{display:flex;align-items:center;justify-content:center;gap:7px;background:linear-gradient(135deg,#003a6b,#005a9e);border:1px solid #0070c9;color:#fff;padding:11px;border-radius:11px;text-decoration:none;font-family:'Syne',sans-serif;font-size:12px;font-weight:700;margin-top:8px;}
.vrate-row{display:flex;gap:7px;flex-shrink:0;}
.vrb{flex:1;border:none;border-radius:11px;padding:13px 6px;font-family:'Syne',sans-serif;font-size:12px;font-weight:700;cursor:pointer;transition:all .15s;}
.vrb:active{transform:scale(.96);}
.vr-no{background:rgba(255,85,85,.2);color:var(--red);border:1px solid rgba(255,85,85,.3);}
.vr-rev{background:rgba(245,200,66,.15);color:var(--gold);border:1px solid rgba(245,200,66,.3);}
.vr-si{background:rgba(62,207,114,.2);color:var(--green);border:1px solid rgba(62,207,114,.3);}
/* ROSCO */
.rosco-body{flex:1;display:flex;flex-direction:column;align-items:center;padding:8px;gap:6px;overflow-y:auto;}
#rosco-svg{width:220px;height:220px;flex-shrink:0;}
.r-def{font-size:12px;color:var(--text2);text-align:center;max-width:280px;min-height:36px;line-height:1.6;}
.rinput-wrap{display:flex;gap:7px;width:100%;max-width:320px;}
.ri{flex:1;background:var(--card2);border:2px solid var(--border);border-radius:11px;padding:13px 14px;color:var(--text);font-size:17px;font-family:'Syne',sans-serif;font-weight:700;text-transform:uppercase;outline:none;transition:border-color .15s;}
.ri:focus{border-color:var(--gold);}
.rsub{background:var(--gold);color:#000;border:none;border-radius:11px;padding:13px 18px;font-family:'Syne',sans-serif;font-size:14px;font-weight:700;cursor:pointer;}
.rpasa{width:100%;max-width:320px;background:var(--card2);border:1px solid var(--border);border-radius:11px;padding:11px;color:var(--text2);font-family:'Syne',sans-serif;font-size:13px;cursor:pointer;text-align:center;}
.rstats{display:flex;gap:20px;}
.rst .v{font-family:'Syne',sans-serif;font-size:18px;font-weight:700;text-align:center;}
.rst .l{font-size:10px;color:var(--text2);text-align:center;}
/* SVG letters */
.rl{cursor:pointer;}
.rl circle{transition:fill .15s,stroke .15s;}
/* STATS */
.bstat{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;margin-bottom:10px;display:flex;align-items:center;gap:14px;}
.bstat-icon{font-size:28px;}
.bstat-val{font-family:'Syne',sans-serif;font-size:26px;font-weight:800;color:var(--gold);}
.bstat-lbl{font-size:12px;color:var(--text2);}
.dp{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px;margin-bottom:7px;}
.dp-h{display:flex;justify-content:space-between;margin-bottom:7px;}
.dp-n{font-size:13px;}
.dp-p{font-family:'Syne',sans-serif;font-size:13px;font-weight:700;color:var(--gold);}
.dpbar{height:5px;background:var(--border);border-radius:3px;overflow:hidden;}
.dpfill{height:100%;background:linear-gradient(90deg,var(--gold),var(--gold2));border-radius:3px;transition:width .6s ease;}
/* IMPORT */
.imp-field{width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;padding:11px 13px;color:var(--text);font-size:13px;font-family:'DM Sans',sans-serif;outline:none;margin-bottom:7px;display:block;}
.imp-field:focus{border-color:var(--gold);}
.btn-act{width:100%;background:var(--card2);border:1px solid var(--border);border-radius:11px;padding:13px;color:var(--text);font-family:'Syne',sans-serif;font-size:13px;font-weight:600;cursor:pointer;margin-bottom:7px;text-align:center;}
.btn-act:active{background:var(--border);}
.btn-act.pri{background:var(--gold);color:#000;border-color:var(--gold);}
.btn-act.dan{color:var(--red);border-color:rgba(255,85,85,.3);}
hr{border:none;border-top:1px solid var(--border);margin:14px 0;}
/* SUMMARY */
#summary{justify-content:center;align-items:center;text-align:center;gap:14px;padding:24px;}
.sum-e{font-size:56px;}
.sum-t{font-family:'Syne',sans-serif;font-size:24px;font-weight:800;}
.sum-row{display:flex;gap:14px;}
.sum-s{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 18px;}
.sum-sv{font-family:'Syne',sans-serif;font-size:22px;font-weight:800;color:var(--gold);}
.sum-sl{font-size:11px;color:var(--text2);}

/* AI DECKS */
.ai-deck-item{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;display:flex;align-items:center;gap:10px;margin-bottom:8px;}
.ai-more-btn{background:rgba(74,158,255,.2);color:var(--blue);border:1px solid rgba(74,158,255,.3);border-radius:8px;padding:6px 10px;font-family:'Syne',sans-serif;font-size:11px;font-weight:700;cursor:pointer;white-space:nowrap;}
.ai-del-btn{background:rgba(255,85,85,.15);color:var(--red);border:1px solid rgba(255,85,85,.3);border-radius:8px;padding:6px 8px;font-size:12px;cursor:pointer;}
.ai-gen-area{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;margin-bottom:12px;}
.ai-gen-area textarea,.ai-gen-area input{width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;padding:11px 13px;color:var(--text);font-size:14px;font-family:'DM Sans',sans-serif;outline:none;margin-bottom:8px;display:block;}
.ai-gen-area textarea:focus,.ai-gen-area input:focus{border-color:var(--gold);}
.topic-chips{display:flex;flex-wrap:wrap;gap:7px;margin-bottom:14px;}
.chip{background:var(--card2);border:1px solid var(--border);border-radius:20px;padding:6px 12px;font-size:12px;color:var(--text2);cursor:pointer;transition:all .15s;}
.chip:active{background:var(--border);}

/* NIVEL BOTE */
.di.bote{border-color:rgba(255,85,85,.4);background:rgba(255,85,85,.05);}
/* MANUAL */
.manual-q-item{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:12px 14px;display:flex;align-items:center;gap:10px;margin-bottom:7px;}
.mq-inp{width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;padding:11px 13px;color:var(--text);font-size:14px;font-family:'DM Sans',sans-serif;outline:none;margin-bottom:7px;display:block;}
.mq-inp:focus{border-color:var(--gold);}

/* ROSCO HISTORY */
.rh-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.rh-list{display:flex;flex-direction:column;gap:6px;}
.rh-row{display:flex;align-items:center;gap:8px;}
.rh-date{font-size:10px;color:var(--text2);width:88px;flex-shrink:0;}
.rh-bar{flex:1;height:6px;background:var(--card2);border-radius:3px;overflow:hidden;}
.rh-fill{height:100%;background:var(--blue);border-radius:3px;}
.rh-score{font-size:12px;font-family:Syne,sans-serif;font-weight:700;width:32px;text-align:right;color:var(--text2);}
.rh-score.gold{color:var(--gold);}
.rh-score.green{color:var(--green);}
#rosco-history{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;margin-top:14px;}

/* T√âRMINOS Y CONDICIONES */
.tos-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);z-index:9999;display:flex;align-items:flex-end;justify-content:center;}
.tos-overlay.hidden{display:none;}
.tos-box{background:var(--card);border-radius:20px 20px 0 0;padding:24px 20px 36px;max-height:85vh;overflow-y:auto;width:100%;max-width:480px;}
.tos-title{font-family:Syne,sans-serif;font-weight:800;font-size:18px;color:var(--gold);margin-bottom:4px;}
.tos-sub{font-size:11px;color:var(--text2);margin-bottom:16px;}
.tos-body{font-size:12px;color:var(--text2);line-height:1.7;margin-bottom:20px;}
.tos-body h3{font-family:Syne,sans-serif;font-weight:700;color:var(--text);font-size:13px;margin:14px 0 4px;}
.tos-body .highlight{color:var(--gold);font-weight:600;}
.tos-btn{width:100%;padding:16px;background:var(--gold);color:#0a0a0f;border:none;border-radius:12px;font-family:Syne,sans-serif;font-weight:800;font-size:16px;cursor:pointer;margin-bottom:8px;}
.tos-link{text-align:center;font-size:11px;color:var(--text2);cursor:pointer;text-decoration:underline;display:block;margin-top:8px;}
/* TOS SCREEN */
.tos-clause{background:var(--card2);border-radius:10px;padding:12px 14px;margin-bottom:10px;font-size:12px;line-height:1.7;color:var(--text2);}
.tos-clause h3{font-family:Syne,sans-serif;font-size:12px;font-weight:700;color:var(--text);margin-bottom:6px;}
</style>

<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="PP Pro">
<link rel="apple-touch-icon" href="icon.svg">
<meta name="theme-color" content="#f5c842">
</head>
<body>
<div id="app">

<!-- HOME -->
<div class="screen active" id="home">
  <div class="home-top">
    <div class="app-title">Pasa<span>Palabra</span> Pro</div>
    <div class="app-sub" id="app-saludo">¬°Hola, Noemi! üë©‚Äç‚öïÔ∏è</div>
    <div class="stats-row">
      <div class="stat-box"><div class="stat-val" id="h-v">0</div><div class="stat-lbl">Vistas</div></div>
      <div class="stat-box"><div class="stat-val" id="h-a">0%</div><div class="stat-lbl">Acierto</div></div>
      <div class="stat-box"><div class="stat-val" id="h-p">0</div><div class="stat-lbl">Pendientes</div></div>
    </div>
    <div class="streak-badge">üî• Racha: <span id="h-r">0</span> d√≠as</div>
  </div>
  <div class="home-body">
    <div class="sec-title">Modo de estudio</div>
    <div class="mode-grid">
      <div class="mc" onclick="startMode('srs')"><div class="mc-icon">üß†</div><div class="mc-name">Repaso SRS</div><div class="mc-desc">Algoritmo Anki ‚Äî solo lo urgente</div><div class="mc-badge">SMART</div></div>
      <div class="mc" onclick="startMode('rapido')"><div class="mc-icon">‚ö°</div><div class="mc-name">R√°pido</div><div class="mc-desc">20 preguntas de tus mazos</div></div>
      <div class="mc" onclick="startVocab()"><div class="mc-icon">üìñ</div><div class="mc-name">Vocabulario RAE</div><div class="mc-desc">Definiciones exactas del DLE</div></div>
      <div class="mc" onclick="startRosco()"><div class="mc-icon">üü°</div><div class="mc-name">El Rosco</div><div class="mc-desc">Simula la prueba final</div></div>
    </div>
    <div class="sec-title">Mazos activos</div>
    <div id="deck-list" class="deck-list"></div>
    <div class="nav-row">
      <div class="nav-btn" onclick="goTo('stats')">üìä Estad√≠sticas</div>
      <div class="nav-btn" onclick="goTo('ai-decks')">ü§ñ IA</div><div class="nav-btn" onclick="goTo('manual-deck')">Mazo</div><div class="nav-btn" onclick="goTo('imp')">‚öôÔ∏è</div>
    </div>
  </div>
</div>

<!-- TRAIN -->
<div class="screen" id="train">
  <div class="topbar">
    <div class="btn-back" onclick="goTo('home')">‚Üê</div>
    <div class="pw"><div class="pb" id="t-pb"></div></div>
    <div class="pt" id="t-ct">0/0</div>
  </div>
  <div class="tbody">
    <div class="dtag" id="t-dk">üìö Mazo</div>
    <div class="qcard">
      <div class="qlbl" id="t-lbl">PREGUNTA</div>
      <div class="qtxt" id="t-q">...</div>
    </div>
    <div class="awrap">
      <input class="ai" id="t-ai" placeholder="Tu respuesta..." onkeydown="if(event.key==='Enter')subAns()">
      <button class="btn-sub" id="t-sub" onclick="subAns()">‚Üí</button>
    </div>
    <div class="fb" id="t-fb"><div class="fb-ans" id="t-fb-a"></div></div>
    <div class="anki-row" id="t-anki">
      <button class="abtn ba" onclick="rateQ(0)">Otra vez<span class="al">&lt;1min</span></button>
      <button class="abtn bh" onclick="rateQ(1)">Dif√≠cil<span class="al">~6min</span></button>
      <button class="abtn bg" onclick="rateQ(2)">Bien<span class="al">~10min</span></button>
      <button class="abtn be" onclick="rateQ(3)">F√°cil<span class="al">4 d√≠as</span></button>
    </div>
    <div class="skip-h" onclick="skipQ()">‚è≠ Saltar</div>
  </div>
</div>

<!-- VOCAB -->
<div class="screen" id="vocab">
  <div class="topbar">
    <div class="btn-back" onclick="goTo('home')">‚Üê</div>
    <div class="pw"><div class="pb" id="v-pb"></div></div>
    <div class="pt" id="v-ct">0/0</div>
  </div>
  <div class="vcbody">
    <div class="vcard" id="vcard" onclick="flipCard()">
      <div class="vc-front">
        <div class="vc-lbl">DEFINICI√ìN ‚Äî ¬øQU√â PALABRA ES?</div>
        <div class="vdef" id="v-fd"></div>
        <div class="vtags" id="v-tags"></div>
      </div>
      <div class="vc-back">
        <div class="vc-lbl">RESPUESTA</div>
        <div class="vword" id="v-w"></div>
        <div class="vdef" id="v-bd"></div>
        <div class="vib vsin" id="v-sin" style="display:none"><div class="vl">Sin√≥nimos RAE</div><span id="v-sin-t"></span></div>
        <div class="vib" id="v-ex" style="display:none"><div class="vl">Ejemplo</div><span id="v-ex-t"></span></div>
        <div class="vib vtip" id="v-tip" style="display:none"><div class="vl">üí° Para memorizar</div><span id="v-tip-t"></span></div>
        <a class="rae-btn" id="v-rae" href="#" target="_blank">üìñ Ver definici√≥n completa en la RAE</a>
      </div>
    </div>
    <div class="vrate-row" id="v-rate" style="display:none">
      <button class="vrb vr-no" onclick="rateV('no')">‚ùå No la s√©</button>
      <button class="vrb vr-rev" onclick="rateV('rev')">üîÑ Repasar</button>
      <button class="vrb vr-si" onclick="rateV('si')">‚úÖ La s√©</button>
    </div>
  </div>
</div>

<!-- ROSCO -->
<div class="screen" id="rosco">
  <div class="topbar">
    <div class="btn-back" onclick="stopRosco()">‚Üê</div>
    <div class="pt" id="r-sc" style="font-size:12px;color:var(--text2)">0‚úÖ 0‚ùå</div>
    <div style="flex:1"></div>
    <div class="pt" id="r-ti" style="font-family:Syne,sans-serif;font-size:18px;font-weight:700;color:var(--gold)">2:30</div>
  </div>
  <div class="rosco-body">
    <svg id="rosco-svg" viewBox="0 0 220 220"></svg>
    <div class="r-def" id="r-def">Elige una letra</div>
    <div class="rinput-wrap">
      <input class="ri" id="r-in" placeholder="..." onkeydown="if(event.key==='Enter')subRosco()" autocomplete="off" autocorrect="off" spellcheck="false">
      <button class="rsub" onclick="subRosco()">‚Üí</button>
    </div>
    <button class="rpasa" onclick="pasaR()">‚è≠ PASA</button>
    <div class="rstats">
      <div class="rst"><div class="v" id="r-c" style="color:var(--green)">0</div><div class="l">‚úÖ</div></div>
      <div class="rst"><div class="v" id="r-w" style="color:var(--red)">0</div><div class="l">‚ùå</div></div>
      <div class="rst"><div class="v" id="r-p">26</div><div class="l">‚è≥</div></div>
    </div>
  </div>
</div>

<!-- STATS -->
<div class="screen" id="stats">
  <div class="topbar"><div class="btn-back" onclick="goTo('home')">‚Üê</div><span style="font-family:Syne,sans-serif;font-weight:700;flex:1">Estad√≠sticas</span></div>
  <div style="padding:16px;overflow-y:auto;">
    <div class="bstat"><div class="bstat-icon">üéØ</div><div><div class="bstat-val" id="st-t">0</div><div class="bstat-lbl">Preguntas respondidas</div></div></div>
    <div class="bstat"><div class="bstat-icon">‚úÖ</div><div><div class="bstat-val" id="st-p">0%</div><div class="bstat-lbl">Tasa de acierto</div></div></div>
    <div class="bstat"><div class="bstat-icon">üî•</div><div><div class="bstat-val" id="st-r">0</div><div class="bstat-lbl">D√≠as de racha</div></div></div>
    <div class="sec-title" style="margin-top:14px">Por mazo</div>
    <div id="st-dk"></div>
  </div>
</div>

<!-- IMPORT -->
<div class="screen" id="imp">
  <div class="topbar"><div class="btn-back" onclick="goTo('home')">‚Üê</div><span style="font-family:Syne,sans-serif;font-weight:700;flex:1">A√±adir vocabulario</span></div>
  <div style="padding:16px;overflow-y:auto;">
    <button class="btn-start" onclick="goTo('tos')" style="margin-bottom:16px;background:linear-gradient(135deg,#1a2a1a,#1e3a1e);border:1px solid var(--green);color:var(--green)">‚öñÔ∏è Ver T√©rminos y Condiciones</button>
    <div class="sec-title">‚ûï Nueva palabra RAE</div>
    <input class="imp-field" id="iw" placeholder="Palabra (ej: Quimera)">
    <textarea class="imp-field" id="id2" rows="3" placeholder="Definici√≥n exacta de la RAE..." style="resize:vertical"></textarea>
    <input class="imp-field" id="isin" placeholder="Sin√≥nimos (opcional)">
    <input class="imp-field" id="iex" placeholder="Frase de ejemplo...">
    <input class="imp-field" id="itip" placeholder="Truco para memorizar...">
    <button class="btn-act pri" onclick="addWord()">üíæ Guardar</button>
    <hr>
    <button class="btn-act" onclick="exportD()">üì§ Exportar progreso</button>
    <div style="font-size:12px;color:var(--text2);margin:10px 0 6px">Importar progreso:</div>
    <textarea class="imp-field" id="ijson" rows="3" placeholder="Pega aqu√≠ el JSON..."></textarea>
    <button class="btn-act" onclick="importD()">üì• Importar</button>
    <hr>
    <button class="btn-act dan" onclick="if(confirm('¬øBorrar todo el progreso?'))resetP()">üóëÔ∏è Reiniciar progreso</button>
  </div>
</div>

<!-- SUMMARY -->
<div class="screen" id="summary" style="overflow-y:auto;padding:20px 16px;">
  <div class="sum-e" id="sum-e">üéâ</div>
  <div class="sum-t" id="sum-t">¬°Completado!</div>
  <div class="sum-row">
    <div class="sum-s"><div class="sum-sv" id="sum-c">0</div><div class="sum-sl">Correctas</div></div>
    <div class="sum-s"><div class="sum-sv" id="sum-w" style="color:var(--red)">0</div><div class="sum-sl">Errores</div></div>
  </div>
  <div id="sum-btns">
    <button class="btn-start" style="max-width:260px" onclick="goTo('home')">Volver al inicio</button>
  </div>
  <div id="rosco-history"></div>
</div>


<!-- TOS OVERLAY ‚Äî primera vez -->
<div class="tos-overlay hidden" id="tos-overlay">
  <div class="tos-box">
    <div class="tos-title">‚öñÔ∏è Acuerdo de Licencia y Uso</div>
    <div class="tos-sub">PasaPalabra Pro ¬∑ Versi√≥n 5.0 ¬∑ Fecha de entrada en vigor: al pulsar "Acepto"</div>
    <div class="tos-body">
      <p>Antes de utilizar esta aplicaci√≥n, lea detenidamente el presente Acuerdo de Licencia de Usuario Final (en adelante, <strong>"ALUF"</strong>). Al pulsar el bot√≥n <em>"Acepto y entiendo"</em>, usted declara haber le√≠do, comprendido y aceptado √≠ntegramente todas las cl√°usulas aqu√≠ recogidas, quedando vinculado/a por las mismas con plena eficacia jur√≠dica conforme al art√≠culo 1254 y siguientes del C√≥digo Civil espa√±ol.</p>
      <h3>Cl√°usula 1 ‚Äî Autor√≠a e Invenci√≥n</h3>
      <p>La presente aplicaci√≥n, denominada <span class="highlight">PasaPalabra Pro</span>, ha sido concebida, dise√±ada e impulsada intelectualmente por <span class="highlight">Andrea Alacreu Fern√°ndez</span> (en adelante, <strong>"la Inventora"</strong>), quien ostenta la titularidad moral e intelectual de la idea originaria, incluyendo su arquitectura pedag√≥gica, metodolog√≠a de entrenamiento y selecci√≥n de contenidos. El desarrollo t√©cnico ha sido ejecutado mediante herramientas de inteligencia artificial bajo la direcci√≥n y supervisi√≥n expresa de la Inventora.</p>
      <h3>Cl√°usula 2 ‚Äî Destinatario y Licencia de Uso</h3>
      <p>La presente licencia se otorga con car√°cter personal, intransferible y no exclusivo a <span class="highlight">Noemi Folgado Molina</span> (en adelante, <strong>"la Usuaria"</strong>), para uso estrictamente privado y con finalidad de entrenamiento y preparaci√≥n para concursos de cultura general, en particular el programa televisivo <em>Pasapalabra</em>.</p>
      <h3>Cl√°usula 3 ‚Äî Contraprestaci√≥n Econ√≥mica por Premio üèÜ</h3>
      <p>En contraprestaci√≥n por el acceso, uso y disfrute de la presente aplicaci√≥n, as√≠ como por la inversi√≥n de tiempo, recursos intelectuales y creativos realizados por la Inventora, <strong>la Usuaria se compromete irrevocablemente a abonar a la Inventora</strong> la cantidad equivalente al <span class="highlight">cinco por ciento (5%) del importe √≠ntegro y bruto</span> de cualquier premio econ√≥mico obtenido en cualquier concurso de televisi√≥n, radio, plataforma digital o evento p√∫blico en el que la Usuaria participe y resulte ganadora, con independencia de:</p>
      <ul style="padding-left:16px;margin:8px 0">
        <li>La cuant√≠a total del premio.</li>
        <li>Las retenciones fiscales aplicables (IRPF u otras).</li>
        <li>El tiempo transcurrido desde la aceptaci√≥n de este acuerdo.</li>
        <li>Que la Usuaria considere que "ya no usa la app".</li>
      </ul>
      <p><strong>Queda expresamente excluida</strong> cualquier deducci√≥n previa por concepto tributario, de gesti√≥n, de representaci√≥n o de cualquier otra naturaleza. <span class="highlight">El 5% se calcula sobre el bruto, antes de impuestos y antes de cualquier retenci√≥n.</span></p>
      <h3>Cl√°usula 4 ‚Äî Forma de Pago</h3>
      <p>El pago deber√° efectuarse en un plazo m√°ximo de <strong>30 d√≠as naturales</strong> desde la obtenci√≥n del premio, mediante transferencia bancaria, Bizum, o el m√©todo que la Inventora designe en ese momento. El retraso en el pago devengar√° un inter√©s de demora del 8% anual conforme a la Ley 3/2004 de medidas de lucha contra la morosidad.</p>
      <h3>Cl√°usula 5 ‚Äî Eficacia Jur√≠dica y Jurisdicci√≥n</h3>
      <p>El presente acuerdo tiene plena eficacia contractual entre las partes. En caso de controversia, ambas partes se someten expresamente a la jurisdicci√≥n de los Juzgados y Tribunales de Valencia, con renuncia expresa a cualquier otro fuero que pudiera corresponderles. Este acuerdo podr√° ser presentado como prueba documental en cualquier procedimiento judicial o arbitral.</p>
      <h3>Cl√°usula 6 ‚Äî Confidencialidad y Buen Rollo</h3>
      <p>Nada de lo anterior impide que ambas partes celebren el bote juntas con una cena de lujo pagada tambi√©n con el premio. Esta cl√°usula tiene el mismo valor jur√≠dico que las anteriores.</p>
    </div>
    <button class="tos-btn" onclick="acceptTOS()">‚úÖ Acepto y entiendo (incluido el 5%)</button>
    <span class="tos-link" onclick="goTo('tos')">Ver t√©rminos completos guardados</span>
  </div>
</div>

<!-- TOS SCREEN -->
<div class="screen" id="tos">
  <div class="topbar">
    <div class="btn-back" onclick="goTo('home')">‚Üê</div>
    <span style="font-family:Syne,sans-serif;font-weight:700;flex:1">‚öñÔ∏è T√©rminos y Condiciones</span>
  </div>
  <div style="padding:16px;overflow-y:auto;flex:1;">
    <div class="tos-clause">
      <h3>Estado de aceptaci√≥n</h3>
      <div id="tos-status" style="color:var(--green);font-weight:600">‚úÖ Aceptado</div>
      <div id="tos-date" style="font-size:11px;margin-top:4px"></div>
    </div>
    <div class="tos-clause">
      <h3>Cl√°usula 1 ‚Äî Autor√≠a</h3>
      PasaPalabra Pro ha sido concebida y dise√±ada por <strong style="color:var(--gold)">Andrea Alacreu Fern√°ndez</strong>, quien ostenta la titularidad moral e intelectual de la idea originaria, arquitectura pedag√≥gica y metodolog√≠a de entrenamiento.
    </div>
    <div class="tos-clause">
      <h3>Cl√°usula 2 ‚Äî Licencia de uso</h3>
      Licencia personal e intransferible otorgada a <strong style="color:var(--gold)">Noemi Folgado Molina</strong> para uso privado con finalidad de preparaci√≥n para concursos, en particular <em>Pasapalabra</em>.
    </div>
    <div class="tos-clause" style="border:1px solid rgba(245,200,66,.4)">
      <h3 style="color:var(--gold)">‚öñÔ∏è Cl√°usula 3 ‚Äî El 5% (LA IMPORTANTE)</h3>
      La Usuaria se compromete irrevocablemente a abonar a la Inventora el <strong style="color:var(--gold);font-size:16px">5% del importe BRUTO</strong> de cualquier premio obtenido en cualquier concurso.<br><br>
      <strong>Antes de impuestos. Antes de retenciones. Antes de lo que sea.</strong><br><br>
      Plazo de pago: 30 d√≠as naturales desde obtenci√≥n del premio.
    </div>
    <div class="tos-clause">
      <h3>Cl√°usula 4 ‚Äî Inter√©s de demora</h3>
      El retraso en el pago devengar√° un inter√©s del 8% anual conforme a la Ley 3/2004 de lucha contra la morosidad.
    </div>
    <div class="tos-clause">
      <h3>Cl√°usula 5 ‚Äî Jurisdicci√≥n</h3>
      Juzgados y Tribunales de Valencia. Este acuerdo tiene plena eficacia contractual y puede presentarse como prueba documental en procedimiento judicial o arbitral.
    </div>
    <div class="tos-clause">
      <h3>Cl√°usula 6 ‚Äî Buen rollo</h3>
      Nada de lo anterior impide celebrar el bote juntas con una cena de lujo pagada tambi√©n con el premio. Misma eficacia jur√≠dica que las dem√°s cl√°usulas.
    </div>
    <button class="btn-act" onclick="exportTOS()">üìÑ Exportar como prueba documental</button>
  </div>
</div>

<!-- MANUAL DECK -->
<div class="screen" id="manual-deck">
  <div class="topbar">
    <div class="btn-back" onclick="goTo('home')">&#8592;</div>
    <span style="font-family:Syne,sans-serif;font-weight:700;flex:1" id="manual-deck-title">Mi Mazo</span>
    <div class="nav-btn" style="font-size:11px;padding:8px 10px;" onclick="generateForManual()">IA</div>
  </div>
  <div style="padding:14px;overflow-y:auto;flex:1;">
    <input class="mq-inp" id="mq-q" placeholder="Pregunta (ej: Con la A: Sin cabeza)">
    <input class="mq-inp" id="mq-a" placeholder="Respuesta correcta">
    <input class="mq-inp" id="mq-aa" placeholder="Alternativas separadas por coma (opcional)">
    <button class="btn-start" onclick="addManualQ()" style="margin-bottom:14px">+ Anadir pregunta</button>
    <div class="sec-title">Preguntas del mazo</div>
    <div id="manual-q-list"></div>
  </div>
</div>

<script>



// ‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê
const DECKS={"Nivel Bote":{icon:"üîí"},"Cultura General":{icon:"üåç"},"Literatura":{icon:"üìö"},"Geograf√≠a":{icon:"üó∫Ô∏è"},"Historia":{icon:"‚öîÔ∏è"},"Historia del Arte":{icon:"üñºÔ∏è"},"Ciencia y Naturaleza":{icon:"üî¨"},"Cine, TV y Espect√°culos":{icon:"üì∫"},"Deportes":{icon:"üèÖ"},"Historia EEUU":{icon:"üá∫üá∏"},"Premios Nobel":{icon:"üèÜ"},"Mitolog√≠a":{icon:"‚ö°"}};
const VOCAB=[
{id:"v01",word:"Apostas√≠a",definition_ES:"1. f. Acci√≥n y efecto de apostatar.",sin√≥nimos:"abjuraci√≥n, retractaci√≥n, renuncia.",example_sentence:"Su apostas√≠a escandaliz√≥ a la comunidad.",memory_tip:"Apo- (alejarse). Alejarse de la fe.",topic_tags:["religi√≥n"]},
{id:"v02",word:"Catarsis",definition_ES:"1. f. Entre los antiguos griegos, purificaci√≥n ritual. 2. f. Efecto purificador que causa la tragedia en los espectadores. 3. f. Purificaci√≥n interior por una experiencia profunda. 4. f. Biol. Expulsi√≥n de sustancias nocivas.",sin√≥nimos:"purificaci√≥n, limpieza, purga.",example_sentence:"La obra produjo una catarsis colectiva.",memory_tip:"K√°tharsis (purga en griego).",topic_tags:["filosof√≠a","teatro"]},
{id:"v03",word:"Epifan√≠a",definition_ES:"1. f. Manifestaci√≥n, aparici√≥n o revelaci√≥n. 2. f. Festividad el 6 de enero, adoraci√≥n de los Reyes Magos.",sin√≥nimos:"Reyes (acep. 2).",example_sentence:"La epifan√≠a le lleg√≥ de golpe.",memory_tip:"Epi (sobre) + phainein (mostrarse). Algo que aparece.",topic_tags:["religi√≥n"]},
{id:"v04",word:"Jactancia",definition_ES:"1. f. Alabanza propia, arrogante y presuntuosa.",sin√≥nimos:"arrogancia, fanfarroner√≠a, vanagloria, presunci√≥n.",example_sentence:"Su jactancia alej√≥ a todos.",memory_tip:"Jactarse = presumir.",topic_tags:["lengua"]},
{id:"v05",word:"Quimera",definition_ES:"1. f. Monstruo mitol√≥gico con cabeza de le√≥n, vientre de cabra y cola de drag√≥n. 2. f. Lo que se imagina como posible sin serlo. 3. f. Biol. Organismo con c√©lulas gen√©ticamente distintas.",sin√≥nimos:"ilusi√≥n, fantas√≠a, sue√±o.",example_sentence:"Ganar sin estudiar era una quimera.",memory_tip:"Monstruo imposible de la mitolog√≠a.",topic_tags:["mitolog√≠a","lengua"]},
{id:"v06",word:"Gnoseolog√≠a",definition_ES:"1. f. Fil. Teor√≠a del conocimiento.",sin√≥nimos:"epistemolog√≠a.",example_sentence:"La gnoseolog√≠a estudia los l√≠mites del conocer.",memory_tip:"Gnosis (conocimiento) + logos.",topic_tags:["filosof√≠a"]},
{id:"v07",word:"Hedonismo",definition_ES:"1. m. Doctrina que proclama el placer como fin supremo. 2. m. Tendencia a la b√∫squeda del placer.",sin√≥nimos:"epicure√≠smo.",example_sentence:"Su hedonismo le imped√≠a sacrificarse.",memory_tip:"Hedon√© (placer en griego).",topic_tags:["filosof√≠a"]},
{id:"v08",word:"Iconoclasta",definition_ES:"1. adj. Que rechaza la autoridad de maestros y normas. 2. adj. Que destru√≠a las im√°genes sagradas.",sin√≥nimos:"heterodoxo, disidente, rebelde.",example_sentence:"Su actitud iconoclasta romp√≠a con todo.",memory_tip:"Ikon (imagen) + klastes (destructor).",topic_tags:["arte","historia"]},
{id:"v09",word:"Nihilismo",definition_ES:"1. m. Negaci√≥n de todo principio religioso, pol√≠tico y social. 2. m. Fil. Negaci√≥n de toda creencia.",sin√≥nimos:"",example_sentence:"El nihilismo niega todo sentido.",memory_tip:"Nihil (nada en lat√≠n).",topic_tags:["filosof√≠a"]},
{id:"v10",word:"Ontolog√≠a",definition_ES:"1. f. Parte de la metaf√≠sica que trata del ser en general.",sin√≥nimos:"",example_sentence:"La ontolog√≠a pregunta qu√© significa existir.",memory_tip:"Onto (ser) + logos.",topic_tags:["filosof√≠a"]},
{id:"v11",word:"Paroxismo",definition_ES:"1. m. Exaltaci√≥n extrema de los afectos y pasiones. 2. m. Med. Exacerbaci√≥n brusca de una enfermedad.",sin√≥nimos:"exaltaci√≥n, frenes√≠, arrebato.",example_sentence:"El paroxismo de alegr√≠a fue desbordante.",memory_tip:"Para + oxys (agudo). El punto m√°s agudo.",topic_tags:["lengua"]},
{id:"v12",word:"Resiliencia",definition_ES:"1. f. Capacidad de adaptaci√≥n frente a un agente perturbador. 2. f. F√≠s. Capacidad de un material el√°stico para absorber energ√≠a.",sin√≥nimos:"",example_sentence:"La resiliencia de los supervivientes fue admirable.",memory_tip:"Resilire (rebotar). Como un muelle.",topic_tags:["psicolog√≠a"]},
{id:"v13",word:"Sorites",definition_ES:"1. m. Fil. Razonamiento de una serie de silogismos truncados.",sin√≥nimos:"",example_sentence:"El sorites del mont√≥n: ¬øcu√°ntos granos hacen un mont√≥n?",memory_tip:"Soros (mont√≥n en griego).",topic_tags:["filosof√≠a"]},
{id:"v14",word:"Tautolog√≠a",definition_ES:"1. f. Repetici√≥n de un mismo pensamiento en distintas formas. 2. f. Fil. F√≥rmula l√≥gica verdadera para todos los valores de verdad.",sin√≥nimos:"pleonasmo, redundancia.",example_sentence:"'Subir arriba' es una tautolog√≠a.",memory_tip:"Tauto (lo mismo) + logos.",topic_tags:["lengua"]},
{id:"v15",word:"Marasmo",definition_ES:"1. m. Suspensi√≥n, paralizaci√≥n, inmovilidad moral o f√≠sica. 2. m. Med. Desnutrici√≥n grave del lactante.",sin√≥nimos:"par√°lisis, estancamiento, aton√≠a.",example_sentence:"El pa√≠s cay√≥ en un profundo marasmo.",memory_tip:"Marasmos (decaimiento en griego).",topic_tags:["lengua"]},
{id:"v16",word:"Lascivia",definition_ES:"1. f. Propensi√≥n a los deleites carnales.",sin√≥nimos:"lujuria, sensualidad, impudicia, lubricidad.",example_sentence:"La lascivia corrompi√≥ sus costumbres.",memory_tip:"Lascivia (libertinaje en lat√≠n).",topic_tags:["lengua"]},
{id:"v17",word:"Ambages",definition_ES:"1. m. pl. Rodeos de palabras. U. m. en la loc. adv. sin ambages.",sin√≥nimos:"rodeos, circunloquios, evasivas.",example_sentence:"Te lo digo sin ambages: no funciona.",memory_tip:"Sin ambages = sin rodeos.",topic_tags:["lengua"]},
{id:"v18",word:"Diatriba",definition_ES:"1. f. Discurso o escrito violento e injurioso contra alguien o algo.",sin√≥nimos:"invectiva, fil√≠pica, ataque.",example_sentence:"Su diatriba dur√≥ m√°s de una hora.",memory_tip:"Ataque verbal muy agresivo.",topic_tags:["lengua"]},
{id:"v19",word:"Fetiche",definition_ES:"1. m. √çdolo al que se atribuyen poderes sobrenaturales. 2. m. Objeto para alejar el mal o traer buena suerte.",sin√≥nimos:"amuleto, talism√°n.",example_sentence:"Llevaba su fetiche como protecci√≥n.",memory_tip:"Feiti√ßo (hechizo en portugu√©s).",topic_tags:["lengua"]},
{id:"v20",word:"Giste",definition_ES:"1. m. Espuma de la cerveza.",sin√≥nimos:"",example_sentence:"El giste cubr√≠a el borde del vaso.",memory_tip:"La espuma de la cerveza. Cl√°sica de Pasapalabra.",topic_tags:["lengua"]},
{id:"v21",word:"Cris√°lida",definition_ES:"1. f. Zool. Pupa de los lepid√≥pteros envuelta en el capullo.",sin√≥nimos:"pupa, capullo.",example_sentence:"La mariposa emerge de la cris√°lida.",memory_tip:"Chrysall√≠s (dorado en griego). Cris√°lida ‚Üí mariposa.",topic_tags:["biolog√≠a"]},
{id:"v22",word:"Ac√©falo",definition_ES:"1. adj. Sin cabeza. 2. adj. Dicho de una colectividad: Sin jefe.",sin√≥nimos:"",example_sentence:"El partido qued√≥ ac√©falo.",memory_tip:"A- (sin) + kephal√© (cabeza).",topic_tags:["lengua"]},
{id:"v23",word:"Batracio",definition_ES:"1. adj. Zool. Anfibio. Apl. a animales, u. t. c. s. m.",sin√≥nimos:"anfibio.",example_sentence:"La rana es el batracio m√°s conocido.",memory_tip:"Batrachos (rana en griego).",topic_tags:["biolog√≠a"]},
{id:"v24",word:"Cen√°culo",definition_ES:"1. m. Sala de la √öltima Cena. 2. m. Grupo de personas que se re√∫nen con fines literarios o art√≠sticos.",sin√≥nimos:"",example_sentence:"El cen√°culo literario se reun√≠a los martes.",memory_tip:"Cenaaculum (comedor en lat√≠n).",topic_tags:["religi√≥n","lengua"]},
{id:"v25",word:"D√©dalo",definition_ES:"1. m. Laberinto, lugar del que es dif√≠cil salir. 2. m. Confusi√≥n, enredo.",sin√≥nimos:"laberinto, enredo, confusi√≥n.",example_sentence:"Se perdi√≥ en el d√©dalo de callejuelas.",memory_tip:"D√©dalo construy√≥ el laberinto de Creta.",topic_tags:["mitolog√≠a","lengua"]},
{id:"v26",word:"Estoicismo",definition_ES:"1. m. Doctrina de los estoicos. 2. m. Fortaleza sobre las propias emociones.",sin√≥nimos:"firmeza, entereza, serenidad, imperturbabilidad.",example_sentence:"Afront√≥ la tragedia con estoicismo.",memory_tip:"Marco Aurelio, Zen√≥n: dominar las pasiones.",topic_tags:["filosof√≠a"]},
{id:"v27",word:"Hip√©rbole",definition_ES:"1. f. Ret. Figura que aumenta o disminuye excesivamente aquello de lo que se habla.",sin√≥nimos:"exageraci√≥n.",example_sentence:"'Te lo he dicho mil veces' es una hip√©rbole.",memory_tip:"Hyper (exceso) + bol√© (lanzamiento).",topic_tags:["lengua"]},
{id:"v28",word:"Inc√≥lume",definition_ES:"1. adj. Sano y salvo, sin lesi√≥n ni menoscabo.",sin√≥nimos:"intacto, ileso, indemne.",example_sentence:"Sali√≥ inc√≥lume del accidente.",memory_tip:"In- + culpa/da√±o. Sin da√±o.",topic_tags:["lengua"]},
{id:"v29",word:"Lac√≥nico",definition_ES:"1. adj. Breve, conciso, compendioso.",sin√≥nimos:"breve, conciso, escueto, sucinto.",example_sentence:"Su respuesta fue lac√≥nica: 'No'.",memory_tip:"De Laconia (Esparta). Los espartanos hablaban poco.",topic_tags:["lengua"]},
{id:"v30",word:"Mis√°ntropo",definition_ES:"1. adj. Que siente aversi√≥n al trato humano. U. t. c. s.",sin√≥nimos:"hura√±o, insociable, arisco.",example_sentence:"El viejo mis√°ntropo rechazaba toda visita.",memory_tip:"Misos (odio) + anthropos (hombre).",topic_tags:["lengua"]},
{id:"v31",word:"Necr√≥polis",definition_ES:"1. f. Cementerio de gran extensi√≥n con monumentos funerarios. 2. f. Arqueol. Conjunto de sepulturas antiguas.",sin√≥nimos:"cementerio, camposanto.",example_sentence:"La necr√≥polis romana fue descubierta en las obras.",memory_tip:"Nekros (muerto) + polis (ciudad).",topic_tags:["lengua"]},
{id:"v32",word:"Ominoso",definition_ES:"1. adj. Azaroso, de mal ag√ºero, abominable, vitando.",sin√≥nimos:"nefasto, funesto, aciago, abominable.",example_sentence:"Un silencio ominoso precedi√≥ a la tormenta.",memory_tip:"Ominosus (de mal ag√ºero en lat√≠n).",topic_tags:["lengua"]},
{id:"v33",word:"Palimpsesto",definition_ES:"1. m. Manuscrito antiguo que conserva huellas de una escritura anterior borrada.",sin√≥nimos:"",example_sentence:"El pergamino era un palimpsesto con tres textos.",memory_tip:"Palin (de nuevo) + psao (raspar). Raspado y reutilizado.",topic_tags:["historia"]},
{id:"v34",word:"Rapsoda",definition_ES:"1. m. y f. En la Antigua Grecia, persona que recitaba poemas √©picos. 2. m. y f. Poeta popular ambulante.",sin√≥nimos:"bardo, aedo, juglar.",example_sentence:"Homero fue el rapsoda m√°s c√©lebre.",memory_tip:"Rhaptein (coser) + ode (canto). El que cose cantos.",topic_tags:["lengua","historia"]},
{id:"v35",word:"Sibarita",definition_ES:"1. adj. Que vive con lujo y se da a los placeres con refinamiento. U. t. c. s.",sin√≥nimos:"hedonista, epic√∫reo, voluptuoso.",example_sentence:"Era un sibarita que solo beb√≠a grandes reservas.",memory_tip:"De S√≠baris, ciudad griega del lujo.",topic_tags:["lengua"]},
{id:"v36",word:"Taumaturgo",definition_ES:"1. m. y f. Persona que hace o dice que hace milagros.",sin√≥nimos:"mago, teurgo.",example_sentence:"El curandero se hac√≠a pasar por taumaturgo.",memory_tip:"Thauma (maravilla) + ergon (obra).",topic_tags:["religi√≥n","lengua"]},
{id:"v37",word:"Ub√©rrimo",definition_ES:"1. adj. Muy abundante y f√©rtil.",sin√≥nimos:"abundante, f√©rtil, fecundo, pr√≥digo.",example_sentence:"La vega ub√©rrima produc√≠a tres cosechas.",memory_tip:"Superlativo de uber (f√©rtil). Lo m√°s f√©rtil.",topic_tags:["lengua"]},
{id:"v38",word:"Vejatorio",definition_ES:"1. adj. Que causa humillaci√≥n o verg√ºenza.",sin√≥nimos:"humillante, degradante, denigrante, ofensivo.",example_sentence:"El trato vejatorio fue denunciado.",memory_tip:"Vejar = humillar. Vejatorio = que humilla.",topic_tags:["lengua"]},
{id:"v39",word:"Xilograf√≠a",definition_ES:"1. f. Arte de grabar en madera. 2. f. Impresi√≥n con planchas de madera grabada.",sin√≥nimos:"grabado en madera.",example_sentence:"Los primeros libros se imprimieron con xilograf√≠a.",memory_tip:"Xylon (madera) + graphia (escritura).",topic_tags:["arte"]},
{id:"v40",word:"Abyecto",definition_ES:"1. adj. Despreciable, vil en extremo.",sin√≥nimos:"vil, ruin, indigno, despreciable, rastrero.",example_sentence:"Su comportamiento abyecto lo conden√≥.",memory_tip:"Ab- + jectus (lanzado). Lo m√°s bajo.",topic_tags:["lengua"]},
{id:"v41",word:"Bienhechor",definition_ES:"1. adj. Que hace bien a otro. U. t. c. s.",sin√≥nimos:"benefactor, protector, fil√°ntropo.",example_sentence:"El bienhechor an√≥nimo pag√≥ la restauraci√≥n.",memory_tip:"Bien + hacer.",topic_tags:["lengua"]},
{id:"v42",word:"Caterva",definition_ES:"1. f. Multitud de personas o cosas de poca importancia o de la misma especie.",sin√≥nimos:"tropel, muchedumbre, turba, hatajo.",example_sentence:"Una caterva de periodistas esperaba.",memory_tip:"Caterva (tropa en lat√≠n). Grupo numeroso.",topic_tags:["lengua"]},
{id:"v43",word:"Demagogo",definition_ES:"1. m. y f. Pol√≠tico que capta la voluntad del pueblo con halagos. 2. m. y f. Hist. Jefe popular en la Antig√ºedad.",sin√≥nimos:"populista, agitador.",example_sentence:"El demagogo promet√≠a sin explicar.",memory_tip:"Demos (pueblo) + agog√≥s (conductor).",topic_tags:["pol√≠tica"]},
{id:"v44",word:"Egregio",definition_ES:"1. adj. Insigne, ilustre.",sin√≥nimos:"ilustre, insigne, preclaro, eminente, notable.",example_sentence:"El egregio maestro recibi√≥ la medalla.",memory_tip:"Egregius (que sobresale del reba√±o).",topic_tags:["lengua"]},
{id:"v45",word:"Gregario",definition_ES:"1. adj. Que vive en reba√±o. 2. adj. Que sigue las ideas ajenas servilmente. 3. adj. Que forma parte del grupo sin sobresalir.",sin√≥nimos:"subordinado, seguidor.",example_sentence:"Los lobos son animales gregarios.",memory_tip:"Gregarius (de reba√±o). El que va con el grupo.",topic_tags:["lengua","biolog√≠a"]},
{id:"v46",word:"Hagi√≥grafo",definition_ES:"1. m. y f. Escritor de vidas de santos.",sin√≥nimos:"",example_sentence:"El hagi√≥grafo dedic√≥ su vida a documentar milagros.",memory_tip:"Hagios (santo) + graphos (escritor).",topic_tags:["religi√≥n"]},
{id:"v47",word:"Misiva",definition_ES:"1. f. Carta o mensaje que se env√≠a a alguien.",sin√≥nimos:"carta, ep√≠stola, mensaje.",example_sentence:"Le envi√≥ una misiva que nunca lleg√≥.",memory_tip:"Missiva (enviada en lat√≠n).",topic_tags:["lengua"]},
{id:"v48",word:"N√≠veo",definition_ES:"1. adj. po√©t. Que es blanco como la nieve.",sin√≥nimos:"blanco, nivoso.",example_sentence:"Su n√≠vea piel contrastaba con el negro.",memory_tip:"Niveus (de nieve en lat√≠n).",topic_tags:["lengua"]},
{id:"v49",word:"Zopenco",definition_ES:"1. adj. coloq. Bruto y tonto. U. t. c. s.",sin√≥nimos:"zoquete, torpe, necio, bruto.",example_sentence:"No seas zopenco y lee las instrucciones.",memory_tip:"Coloquial para alguien torpe y bruto.",topic_tags:["lengua"]},
{id:"v50",word:"K√©nosis",definition_ES:"1. f. Rel. Acto por el que el Hijo de Dios se despoj√≥ de su condici√≥n divina para asumir la condici√≥n humana.",sin√≥nimos:"",example_sentence:"La k√©nosis es central en la cristolog√≠a.",memory_tip:"Kenosis (vaciamiento en griego).",topic_tags:["teolog√≠a"]},
];
const QQ=[
{id:"cg01",dk:"Cultura General",q:"Con la J: alabanza propia, arrogante y presuntuosa",a:"jactancia",aa:[]},
{id:"cg02",dk:"Cultura General",q:"Con la P: manuscrito antiguo con huellas de escritura anterior borrada",a:"palimpsesto",aa:[]},
{id:"cg03",dk:"Cultura General",q:"Con la G: que vive en reba√±o o sigue las ideas ajenas",a:"gregario",aa:[]},
{id:"cg04",dk:"Cultura General",q:"Con la U: muy abundante y f√©rtil",a:"ub√©rrimo",aa:["uberrimo"]},
{id:"cg05",dk:"Cultura General",q:"Con la O: parte de la metaf√≠sica que trata del ser en general",a:"ontolog√≠a",aa:["ontologia"]},
{id:"cg06",dk:"Cultura General",q:"Con la E: insigne, ilustre",a:"egregio",aa:[]},
{id:"cg07",dk:"Cultura General",q:"Con la I: que destru√≠a im√°genes sagradas o rechaza la autoridad",a:"iconoclasta",aa:[]},
{id:"cg08",dk:"Cultura General",q:"Con la D: discurso violento e injurioso contra alguien",a:"diatriba",aa:[]},
{id:"cg09",dk:"Cultura General",q:"Con la A: acci√≥n de abandonar p√∫blicamente la fe religiosa",a:"apostas√≠a",aa:["apostasia"]},
{id:"cg10",dk:"Cultura General",q:"Con la C: multitud de personas de poca importancia",a:"caterva",aa:[]},
{id:"cg11",dk:"Cultura General",q:"Con la L: breve y conciso en el modo de hablar",a:"lac√≥nico",aa:["laconico"]},
{id:"cg12",dk:"Cultura General",q:"Con la G: espuma de la cerveza",a:"giste",aa:[]},
{id:"cg13",dk:"Cultura General",q:"¬øCu√°ntos huesos tiene el cuerpo humano adulto?",a:"206",aa:["doscientos seis"]},
{id:"cg14",dk:"Cultura General",q:"¬øCu√°ntos planetas tiene el sistema solar?",a:"8",aa:["ocho"]},
{id:"cg15",dk:"Cultura General",q:"¬øCu√°l es el metal m√°s abundante en la corteza terrestre?",a:"aluminio",aa:[]},
{id:"cg16",dk:"Cultura General",q:"Con la T: repetici√≥n de un mismo pensamiento en distintas formas",a:"tautolog√≠a",aa:["tautologia"]},
{id:"cg17",dk:"Cultura General",q:"Con la M: suspensi√≥n o paralizaci√≥n total en lo moral o f√≠sico",a:"marasmo",aa:[]},
{id:"cg18",dk:"Cultura General",q:"Con la R: capacidad de adaptaci√≥n frente a un agente perturbador",a:"resiliencia",aa:[]},
{id:"cg19",dk:"Cultura General",q:"Con la C: pupa de los lepid√≥pteros envuelta en capullo",a:"cris√°lida",aa:["crisalida"]},
{id:"cg20",dk:"Cultura General",q:"Con la N: sin cabeza o sin jefe (adjetivo)",a:"ac√©falo",aa:["acefalo"]},
{id:"lit01",dk:"Literatura",q:"¬øQui√©n escribi√≥ el Quijote?",a:"Cervantes",aa:["miguel de cervantes"]},
{id:"lit02",dk:"Literatura",q:"¬øC√≥mo se llama el escudero de Don Quijote?",a:"Sancho Panza",aa:["sancho"]},
{id:"lit03",dk:"Literatura",q:"¬øQui√©n escribi√≥ Romeo y Julieta?",a:"Shakespeare",aa:["william shakespeare"]},
{id:"lit04",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'La Regenta'?",a:"Clar√≠n",aa:["leopoldo alas"]},
{id:"lit05",dk:"Literatura",q:"¬øA qu√© generaci√≥n pertenece Lorca?",a:"Generaci√≥n del 27",aa:["del 27"]},
{id:"lit06",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'En busca del tiempo perdido'?",a:"Proust",aa:["marcel proust"]},
{id:"lit07",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'Fortunata y Jacinta'?",a:"P√©rez Gald√≥s",aa:["gald√≥s"]},
{id:"lit08",dk:"Literatura",q:"¬øQui√©n escribi√≥ '1984'?",a:"Orwell",aa:["george orwell"]},
{id:"lit09",dk:"Literatura",q:"¬øDe qu√© autor es 'Cien a√±os de soledad'?",a:"Garc√≠a M√°rquez",aa:["gabriel garc√≠a m√°rquez"]},
{id:"lit10",dk:"Literatura",q:"Con la R: en Grecia antigua, persona que recitaba poemas √©picos",a:"rapsoda",aa:[]},
{id:"lit11",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'La Odisea'?",a:"Homero",aa:[]},
{id:"lit12",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'Luces de bohemia'?",a:"Valle-Incl√°n",aa:["ram√≥n del valle-incl√°n"]},
{id:"lit13",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'El proceso'?",a:"Kafka",aa:["franz kafka"]},
{id:"lit14",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'La casa de Bernarda Alba'?",a:"Lorca",aa:["garc√≠a lorca"]},
{id:"lit15",dk:"Literatura",q:"¬øDe qu√© autor es 'Crimen y castigo'?",a:"Dostoievski",aa:[]},
{id:"lit16",dk:"Literatura",q:"¬øDe qu√© autor es 'Rayuela'?",a:"Cort√°zar",aa:["julio cort√°zar"]},
{id:"lit17",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'Las flores del mal'?",a:"Baudelaire",aa:["charles baudelaire"]},
{id:"lit18",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'Platero y yo'?",a:"Juan Ram√≥n Jim√©nez",aa:["juan ram√≥n"]},
{id:"lit19",dk:"Literatura",q:"¬øQui√©n escribi√≥ 'El √°rbol de la ciencia'?",a:"P√≠o Baroja",aa:["baroja"]},
{id:"lit20",dk:"Literatura",q:"Con la S: en filosof√≠a, serie de silogismos truncados",a:"sorites",aa:[]},
{id:"geo01",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Australia?",a:"Canberra",aa:[]},
{id:"geo02",dk:"Geograf√≠a",q:"¬øCu√°l es el r√≠o m√°s largo del mundo?",a:"Nilo",aa:["r√≠o nilo"]},
{id:"geo03",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Canad√°?",a:"Ottawa",aa:[]},
{id:"geo04",dk:"Geograf√≠a",q:"¬øCu√°l es la monta√±a m√°s alta del mundo?",a:"Everest",aa:["monte everest"]},
{id:"geo05",dk:"Geograf√≠a",q:"¬øCu√°l es el pa√≠s m√°s grande del mundo?",a:"Rusia",aa:[]},
{id:"geo06",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Nueva Zelanda?",a:"Wellington",aa:[]},
{id:"geo07",dk:"Geograf√≠a",q:"¬øCu√°l es el r√≠o m√°s largo de Espa√±a?",a:"Tajo",aa:["r√≠o tajo"]},
{id:"geo08",dk:"Geograf√≠a",q:"¬øCu√°l es el mar m√°s salado del mundo?",a:"Mar Muerto",aa:[]},
{id:"geo09",dk:"Geograf√≠a",q:"¬øCu√°ntos pa√≠ses forman Am√©rica del Sur?",a:"12",aa:["doce"]},
{id:"geo10",dk:"Geograf√≠a",q:"¬øCu√°l es la isla m√°s grande del mundo?",a:"Groenlandia",aa:[]},
{id:"geo11",dk:"Geograf√≠a",q:"¬øCu√°l es la comunidad aut√≥noma m√°s grande de Espa√±a?",a:"Castilla y Le√≥n",aa:[]},
{id:"geo12",dk:"Geograf√≠a",q:"¬øCu√°l es el pico m√°s alto de la Pen√≠nsula Ib√©rica?",a:"Mulhac√©n",aa:["mulhacen"]},
{id:"geo13",dk:"Geograf√≠a",q:"¬øCu√°l es el pa√≠s m√°s peque√±o del mundo?",a:"Vaticano",aa:["ciudad del vaticano"]},
{id:"geo14",dk:"Geograf√≠a",q:"¬øCu√°l es el lago m√°s profundo del mundo?",a:"Baikal",aa:["lago baikal"]},
{id:"geo15",dk:"Geograf√≠a",q:"¬øEn qu√© provincia nace el r√≠o Ebro?",a:"Cantabria",aa:[]},
{id:"geo16",dk:"Geograf√≠a",q:"¬øCu√°ntos pa√≠ses tiene √Åfrica?",a:"54",aa:["cincuenta y cuatro"]},
{id:"geo17",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Kazajist√°n?",a:"Astana",aa:["nur-sult√°n"]},
{id:"geo18",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Bielorrusia?",a:"Minsk",aa:[]},
{id:"geo19",dk:"Geograf√≠a",q:"¬øCu√°l es la capital de Fiyi?",a:"Suva",aa:[]},
{id:"geo20",dk:"Geograf√≠a",q:"¬øCu√°l es el desierto c√°lido m√°s grande del mundo?",a:"Sahara",aa:[]},
{id:"his01",dk:"Historia",q:"¬øEn qu√© a√±o estall√≥ la Revoluci√≥n Francesa?",a:"1789",aa:[]},
{id:"his02",dk:"Historia",q:"¬øEn qu√© a√±o termin√≥ la Guerra Civil Espa√±ola?",a:"1939",aa:[]},
{id:"his03",dk:"Historia",q:"¬øEn qu√© a√±o comenz√≥ la Primera Guerra Mundial?",a:"1914",aa:[]},
{id:"his04",dk:"Historia",q:"¬øEn qu√© a√±o cay√≥ el Imperio Romano de Occidente?",a:"476",aa:[]},
{id:"his05",dk:"Historia",q:"¬øEn qu√© a√±o lleg√≥ Col√≥n a Am√©rica?",a:"1492",aa:[]},
{id:"his06",dk:"Historia",q:"¬øQui√©n fue el primer emperador de Roma?",a:"Augusto",aa:["c√©sar augusto","octavio"]},
{id:"his07",dk:"Historia",q:"¬øEn qu√© a√±o se firm√≥ la Carta Magna?",a:"1215",aa:[]},
{id:"his08",dk:"Historia",q:"¬øEn qu√© a√±o cay√≥ el Muro de Berl√≠n?",a:"1989",aa:[]},
{id:"his09",dk:"Historia",q:"¬øEn qu√© a√±o se promulg√≥ la Constituci√≥n espa√±ola vigente?",a:"1978",aa:[]},
{id:"his10",dk:"Historia",q:"¬øQui√©n dirigi√≥ la URSS durante la Segunda Guerra Mundial?",a:"Stalin",aa:[]},
{id:"his11",dk:"Historia",q:"¬øEn qu√© a√±o se public√≥ el Manifiesto Comunista?",a:"1848",aa:[]},
{id:"his12",dk:"Historia",q:"¬øEn qu√© a√±o se fund√≥ la ONU?",a:"1945",aa:[]},
{id:"his13",dk:"Historia",q:"¬øCu√°ntos a√±os dur√≥ la dictadura de Franco?",a:"36",aa:["treinta y seis"]},
{id:"his14",dk:"Historia",q:"¬øEn qu√© a√±o se produjo la Revoluci√≥n Rusa?",a:"1917",aa:[]},
{id:"his15",dk:"Historia",q:"¬øQui√©n fue asesinado en la Bastilla en la Revoluci√≥n Francesa?",a:"ninguno",aa:[]},
{id:"his16",dk:"Historia",q:"¬øCu√°ntos a√±os dur√≥ la guerra de los Cien A√±os?",a:"116",aa:["ciento diecis√©is"]},
{id:"his17",dk:"Historia",q:"¬øC√≥mo se llam√≥ el per√≠odo de transici√≥n pol√≠tica espa√±ola tras Franco?",a:"Transici√≥n",aa:["la transici√≥n"]},
{id:"his18",dk:"Historia",q:"¬øQui√©n fue el √∫ltimo rey visigodo de Espa√±a?",a:"Rodrigo",aa:["don rodrigo"]},
{id:"his19",dk:"Historia",q:"¬øEn qu√© a√±o se firm√≥ la Declaraci√≥n de Independencia de EE.UU.?",a:"1776",aa:[]},
{id:"his20",dk:"Historia",q:"¬øQui√©n fue el primer presidente de los Estados Unidos?",a:"George Washington",aa:["washington"]},
{id:"art01",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'La Gioconda'?",a:"Leonardo da Vinci",aa:["leonardo"]},
{id:"art02",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'Las Meninas'?",a:"Vel√°zquez",aa:["diego vel√°zquez"]},
{id:"art03",dk:"Historia del Arte",q:"¬øQui√©n esculpi√≥ 'El David'?",a:"Miguel √Ångel",aa:["michelangelo"]},
{id:"art04",dk:"Historia del Arte",q:"¬øQui√©n dise√±√≥ la Sagrada Familia de Barcelona?",a:"Gaud√≠",aa:["antonio gaud√≠"]},
{id:"art05",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'El grito'?",a:"Munch",aa:["edvard munch"]},
{id:"art06",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'La persistencia de la memoria' con los relojes blandos?",a:"Dal√≠",aa:["salvador dal√≠"]},
{id:"art07",dk:"Historia del Arte",q:"¬øEn qu√© ciudad est√° el Parten√≥n?",a:"Atenas",aa:[]},
{id:"art08",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'Los girasoles'?",a:"Van Gogh",aa:["vincent van gogh"]},
{id:"art09",dk:"Historia del Arte",q:"¬øDe qu√© material est√° hecha la Venus de Milo?",a:"M√°rmol",aa:["marmol"]},
{id:"art10",dk:"Historia del Arte",q:"Con la X: arte de grabar en madera",a:"xilograf√≠a",aa:["xilografia"]},
{id:"art11",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ el techo de la Capilla Sixtina?",a:"Miguel √Ångel",aa:["michelangelo"]},
{id:"art12",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'Guernica'?",a:"Picasso",aa:["pablo picasso"]},
{id:"art13",dk:"Historia del Arte",q:"¬øEn qu√© pa√≠s est√° el Taj Mahal?",a:"India",aa:[]},
{id:"art14",dk:"Historia del Arte",q:"¬øQui√©n pint√≥ 'La ronda de noche'?",a:"Rembrandt",aa:[]},
{id:"art15",dk:"Historia del Arte",q:"¬øQu√© estilo arquitect√≥nico tiene arcos apuntados?",a:"G√≥tico",aa:["estilo g√≥tico"]},
{id:"art16",dk:"Historia del Arte",q:"¬øEn qu√© museo est√°n 'Las Meninas'?",a:"Museo del Prado",aa:["el prado","prado"]},
{id:"art17",dk:"Historia del Arte",q:"¬øA qu√© movimiento pertenecen Braque y Picasso en sus inicios?",a:"Cubismo",aa:[]},
{id:"art18",dk:"Historia del Arte",q:"¬øC√≥mo se llama la escultura de Rodin del hombre pensando?",a:"El pensador",aa:["le penseur"]},
{id:"art19",dk:"Historia del Arte",q:"¬øEn qu√© ciudad surgi√≥ el movimiento impresionista?",a:"Par√≠s",aa:["paris"]},
{id:"art20",dk:"Historia del Arte",q:"¬øQui√©n es considerado padre del arte abstracto?",a:"Kandinsky",aa:[]},
{id:"sci01",dk:"Ciencia y Naturaleza",q:"¬øQu√© cient√≠fico formul√≥ la teor√≠a de la relatividad?",a:"Einstein",aa:["albert einstein"]},
{id:"sci02",dk:"Ciencia y Naturaleza",q:"¬øCu√°ntos elementos tiene la tabla peri√≥dica?",a:"118",aa:["ciento dieciocho"]},
{id:"sci03",dk:"Ciencia y Naturaleza",q:"¬øQu√© mol√©cula transporta el ox√≠geno en la sangre?",a:"Hemoglobina",aa:[]},
{id:"sci04",dk:"Ciencia y Naturaleza",q:"¬øCu√°nto tarda la luz en llegar del Sol a la Tierra?",a:"8 minutos",aa:["ocho minutos"]},
{id:"sci05",dk:"Ciencia y Naturaleza",q:"Con la B: anfibio seg√∫n la RAE",a:"batracio",aa:[]},
{id:"sci06",dk:"Ciencia y Naturaleza",q:"¬øCu√°l es el elemento m√°s abundante en el universo?",a:"Hidr√≥geno",aa:["hidrogeno"]},
{id:"sci07",dk:"Ciencia y Naturaleza",q:"¬øC√≥mo se llama la galaxia donde est√° el Sistema Solar?",a:"V√≠a L√°ctea",aa:["la v√≠a l√°ctea"]},
{id:"sci08",dk:"Ciencia y Naturaleza",q:"¬øCu√°l es el s√≠mbolo qu√≠mico del oro?",a:"Au",aa:[]},
{id:"sci09",dk:"Ciencia y Naturaleza",q:"¬øCu√°l es el gas m√°s abundante en la atm√≥sfera?",a:"Nitr√≥geno",aa:["nitrogeno"]},
{id:"sci10",dk:"Ciencia y Naturaleza",q:"Con la Q: organismo con c√©lulas gen√©ticamente distintas (biolog√≠a)",a:"quimera",aa:[]},
{id:"sci11",dk:"Ciencia y Naturaleza",q:"¬øQu√© √°cido contiene la informaci√≥n gen√©tica?",a:"ADN",aa:["√°cido desoxirribonucleico","dna"]},
{id:"sci12",dk:"Ciencia y Naturaleza",q:"¬øA qu√© velocidad viaja la luz?",a:"300.000 km/s",aa:["trescientos mil kil√≥metros por segundo"]},
{id:"sci13",dk:"Ciencia y Naturaleza",q:"¬øC√≥mo se llama el punto de m√°xima proximidad al Sol?",a:"Perihelio",aa:[]},
{id:"sci14",dk:"Ciencia y Naturaleza",q:"Con la C: expulsi√≥n de sustancias nocivas al organismo (medicina)",a:"catarsis",aa:[]},
{id:"sci15",dk:"Ciencia y Naturaleza",q:"¬øC√≥mo se llama el proceso de divisi√≥n celular?",a:"Mitosis",aa:["meiosis"]},
{id:"sci16",dk:"Ciencia y Naturaleza",q:"¬øCu√°l es el punto de ebullici√≥n del agua al nivel del mar?",a:"100 grados",aa:["100"]},
{id:"sci17",dk:"Ciencia y Naturaleza",q:"¬øQu√© unidad mide la frecuencia de las ondas?",a:"Hercio",aa:["hertz","hz"]},
{id:"sci18",dk:"Ciencia y Naturaleza",q:"Con la R: capacidad de adaptaci√≥n frente a adversidad",a:"resiliencia",aa:[]},
{id:"sci19",dk:"Ciencia y Naturaleza",q:"¬øQui√©n formul√≥ la ley de la gravedad universal?",a:"Newton",aa:["isaac newton"]},
{id:"sci20",dk:"Ciencia y Naturaleza",q:"¬øQu√© es un p√∫lsar?",a:"estrella de neutrones",aa:["pulsar"]},
{id:"cin01",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n dirigi√≥ 'Schindler's List'?",a:"Spielberg",aa:["steven spielberg"]},
{id:"cin02",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n interpret√≥ a James Bond por primera vez?",a:"Sean Connery",aa:["connery"]},
{id:"cin03",dk:"Cine, TV y Espect√°culos",q:"¬øEn qu√© a√±o se estren√≥ 'El Padrino'?",a:"1972",aa:[]},
{id:"cin04",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n dirigi√≥ 'Pulp Fiction'?",a:"Tarantino",aa:["quentin tarantino"]},
{id:"cin05",dk:"Cine, TV y Espect√°culos",q:"¬øEn qu√© ciudad naci√≥ Freddie Mercury?",a:"Zanz√≠bar",aa:["zanzibar"]},
{id:"cin06",dk:"Cine, TV y Espect√°culos",q:"¬øCu√°ntas sinfon√≠as compuso Beethoven?",a:"9",aa:["nueve"]},
{id:"cin07",dk:"Cine, TV y Espect√°culos",q:"¬øC√≥mo se llama la √≥pera de Mozart sobre Don Juan?",a:"Don Giovanni",aa:[]},
{id:"cin08",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n dirigi√≥ '2001: Una odisea del espacio'?",a:"Kubrick",aa:["stanley kubrick"]},
{id:"cin09",dk:"Cine, TV y Espect√°culos",q:"¬øQu√© pel√≠cula gan√≥ la Palma de Oro en Cannes 2019?",a:"Par√°sitos",aa:["parasite"]},
{id:"cin10",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n protagoniz√≥ 'Forrest Gump'?",a:"Tom Hanks",aa:["hanks"]},
{id:"cin11",dk:"Cine, TV y Espect√°culos",q:"¬øDe qu√© pa√≠s es originario el flamenco?",a:"Espa√±a",aa:[]},
{id:"cin12",dk:"Cine, TV y Espect√°culos",q:"¬øC√≥mo se llamaba el grupo de los Beatles antes?",a:"The Quarrymen",aa:["quarrymen"]},
{id:"cin13",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n compuso 'Las cuatro estaciones'?",a:"Vivaldi",aa:["antonio vivaldi"]},
{id:"cin14",dk:"Cine, TV y Espect√°culos",q:"¬øC√≥mo se llama el instrumento m√°s grande de cuerda pulsada en orquesta?",a:"Arpa",aa:[]},
{id:"cin15",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n gan√≥ el Nobel de Literatura en 2016 siendo m√∫sico?",a:"Bob Dylan",aa:["dylan"]},
{id:"cin16",dk:"Cine, TV y Espect√°culos",q:"¬øCu√°ntos oros ol√≠mpicos tiene Michael Phelps?",a:"23",aa:["veintitr√©s"]},
{id:"cin17",dk:"Cine, TV y Espect√°culos",q:"¬øQu√© pel√≠cula barri√≥ los Oscar 2023 con 7 estatuillas?",a:"Todo a la vez en todas partes",aa:["everything everywhere all at once"]},
{id:"cin18",dk:"Cine, TV y Espect√°culos",q:"¬øQui√©n gan√≥ el Oscar a Mejor Actor por 'Forrest Gump'?",a:"Tom Hanks",aa:["hanks"]},
{id:"cin19",dk:"Cine, TV y Espect√°culos",q:"¬øCu√°ntos Balones de Oro tiene Lionel Messi?",a:"8",aa:["ocho"]},
{id:"cin20",dk:"Cine, TV y Espect√°culos",q:"¬øEn qu√© a√±o gan√≥ Espa√±a su primer Mundial de f√∫tbol?",a:"2010",aa:[]},
{id:"dep01",dk:"Deportes",q:"¬øCu√°ntos jugadores tiene un equipo de f√∫tbol?",a:"11",aa:["once"]},
{id:"dep02",dk:"Deportes",q:"¬øEn qu√© ciudad se celebraron los JJ.OO. de 1992?",a:"Barcelona",aa:[]},
{id:"dep03",dk:"Deportes",q:"¬øCu√°ntos Grand Slams ha ganado Rafael Nadal?",a:"22",aa:["veintid√≥s"]},
{id:"dep04",dk:"Deportes",q:"¬øQu√© selecci√≥n ha ganado m√°s Mundiales de f√∫tbol?",a:"Brasil",aa:[]},
{id:"dep05",dk:"Deportes",q:"¬øCu√°ntos metros mide un marat√≥n?",a:"42.195",aa:["42 kil√≥metros","42195"]},
{id:"dep06",dk:"Deportes",q:"¬øCu√°ntas etapas tiene el Tour de Francia?",a:"21",aa:["veintiuna"]},
{id:"dep07",dk:"Deportes",q:"¬øCu√°ntos puntos vale un triple en baloncesto?",a:"3",aa:["tres"]},
{id:"dep08",dk:"Deportes",q:"¬øCu√°ntos campeonatos tiene Schumacher en F1?",a:"7",aa:["siete"]},
{id:"dep09",dk:"Deportes",q:"¬øEn qu√© superficie se juega Wimbledon?",a:"Hierba",aa:["c√©sped"]},
{id:"dep10",dk:"Deportes",q:"¬øQui√©n tiene el r√©cord mundial de los 100 metros lisos?",a:"Usain Bolt",aa:["bolt"]},
{id:"dep11",dk:"Deportes",q:"¬øCu√°ntos puntos vale un ensayo en rugby?",a:"5",aa:["cinco"]},
{id:"dep12",dk:"Deportes",q:"¬øC√≥mo se llama el estadio del FC Barcelona?",a:"Camp Nou",aa:["spotify camp nou"]},
{id:"dep13",dk:"Deportes",q:"¬øQu√© ciclista espa√±ol gan√≥ el Tour 5 veces seguidas?",a:"Indur√°in",aa:["miguel indur√°in"]},
{id:"dep14",dk:"Deportes",q:"¬øCu√°ntos asaltos tiene un combate de boxeo profesional?",a:"12",aa:["doce"]},
{id:"dep15",dk:"Deportes",q:"¬øCu√°ntos aros tiene la bandera ol√≠mpica?",a:"5",aa:["cinco"]},
{id:"dep16",dk:"Deportes",q:"¬øCada cu√°ntos a√±os se celebran los JJ.OO. de verano?",a:"4",aa:["cuatro"]},
{id:"dep17",dk:"Deportes",q:"¬øCu√°ntos oros ol√≠mpicos tiene Michael Phelps?",a:"23",aa:["veintitr√©s"]},
{id:"dep18",dk:"Deportes",q:"¬øCu√°l es el torneo de golf m√°s antiguo del mundo?",a:"The Open Championship",aa:["british open","the open"]},
{id:"dep19",dk:"Deportes",q:"¬øCu√°ntos Balones de Oro tiene Messi?",a:"8",aa:["ocho"]},
{id:"dep20",dk:"Deportes",q:"¬øCu√°ntos lados tiene un hex√°gono?",a:"6",aa:["seis"]},
{id:"usa01",dk:"Historia EEUU",q:"¬øEn qu√© a√±o se firm√≥ la Declaraci√≥n de Independencia?",a:"1776",aa:[]},
{id:"usa02",dk:"Historia EEUU",q:"¬øQui√©n fue asesinado en el Teatro Ford en 1865?",a:"Lincoln",aa:["abraham lincoln"]},
{id:"usa03",dk:"Historia EEUU",q:"¬øCu√°ntos estados tiene EE.UU.?",a:"50",aa:["cincuenta"]},
{id:"usa04",dk:"Historia EEUU",q:"¬øEn qu√© a√±o comenz√≥ la Guerra de Secesi√≥n?",a:"1861",aa:[]},
{id:"usa05",dk:"Historia EEUU",q:"¬øQui√©n fue el primer presidente afroamericano de EE.UU.?",a:"Obama",aa:["barack obama"]},
{id:"usa06",dk:"Historia EEUU",q:"¬øQu√© evento llev√≥ a EE.UU. a la Segunda Guerra Mundial?",a:"Pearl Harbor",aa:[]},
{id:"usa07",dk:"Historia EEUU",q:"¬øQui√©n fue asesinado en Dallas en 1963?",a:"Kennedy",aa:["john f. kennedy","jfk"]},
{id:"usa08",dk:"Historia EEUU",q:"¬øC√≥mo se llama el esc√°ndalo que oblig√≥ a Nixon a dimitir?",a:"Watergate",aa:[]},
{id:"usa09",dk:"Historia EEUU",q:"¬øQui√©n pronunci√≥ 'I Have a Dream'?",a:"Martin Luther King",aa:["luther king","mlk"]},
{id:"usa10",dk:"Historia EEUU",q:"¬øEn qu√© a√±o llegaron los primeros astronautas a la Luna?",a:"1969",aa:[]},
{id:"usa11",dk:"Historia EEUU",q:"¬øC√≥mo se llama la enmienda que aboli√≥ la esclavitud?",a:"Decimotercera enmienda",aa:["13¬™ enmienda","enmienda 13"]},
{id:"usa12",dk:"Historia EEUU",q:"¬øC√≥mo se llam√≥ la prohibici√≥n del alcohol en EE.UU.?",a:"Ley Seca",aa:["prohibici√≥n"]},
{id:"usa13",dk:"Historia EEUU",q:"¬øEn qu√© a√±o fue el crack de la Bolsa que inici√≥ la Gran Depresi√≥n?",a:"1929",aa:[]},
{id:"usa14",dk:"Historia EEUU",q:"¬øQui√©n orden√≥ las bombas at√≥micas sobre Jap√≥n?",a:"Truman",aa:["harry truman"]},
{id:"usa15",dk:"Historia EEUU",q:"¬øEn qu√© a√±o se hundi√≥ el Titanic?",a:"1912",aa:[]},
{id:"usa16",dk:"Historia EEUU",q:"¬øEn qu√© estado est√° Hollywood?",a:"California",aa:[]},
{id:"usa17",dk:"Historia EEUU",q:"¬øQui√©n compr√≥ Luisiana a Francia?",a:"Thomas Jefferson",aa:["jefferson"]},
{id:"usa18",dk:"Historia EEUU",q:"¬øCu√°ntos presidentes ha tenido EE.UU. hasta 2024?",a:"46",aa:["cuarenta y seis"]},
{id:"usa19",dk:"Historia EEUU",q:"¬øC√≥mo se llama el discurso de Lincoln en Gettysburg?",a:"Gettysburg Address",aa:["discurso de gettysburg"]},
{id:"usa20",dk:"Historia EEUU",q:"¬øContra qu√© pa√≠s luch√≥ EE.UU. en la guerra de Vietnam?",a:"Vietnam del Norte",aa:["vietnam"]},
{id:"nob01",dk:"Premios Nobel",q:"¬øQui√©n fue el primer espa√±ol en ganar el Nobel de Literatura?",a:"Echegaray",aa:["jos√© echegaray"]},
{id:"nob02",dk:"Premios Nobel",q:"¬øQui√©n gan√≥ el Nobel de la Paz en 1993 junto con De Klerk?",a:"Mandela",aa:["nelson mandela"]},
{id:"nob03",dk:"Premios Nobel",q:"¬øQui√©n descubri√≥ la penicilina?",a:"Fleming",aa:["alexander fleming"]},
{id:"nob04",dk:"Premios Nobel",q:"¬øCu√°ntos Nobeles ha ganado Marie Curie?",a:"2",aa:["dos"]},
{id:"nob05",dk:"Premios Nobel",q:"¬øQu√© espa√±ol gan√≥ el Nobel de Literatura en 1989?",a:"Camilo Jos√© Cela",aa:["cela"]},
{id:"nob06",dk:"Premios Nobel",q:"¬øQui√©n fue la persona m√°s joven en ganar el Nobel de la Paz?",a:"Malala",aa:["malala yousafzai"]},
{id:"nob07",dk:"Premios Nobel",q:"¬øQui√©n gan√≥ el Nobel de F√≠sica en 1921 por el efecto fotoel√©ctrico?",a:"Einstein",aa:[]},
{id:"nob08",dk:"Premios Nobel",q:"¬øQu√© poeta chileno gan√≥ el Nobel en 1971?",a:"Pablo Neruda",aa:["neruda"]},
{id:"nob09",dk:"Premios Nobel",q:"¬øQui√©n fund√≥ la Cruz Roja y gan√≥ el primer Nobel de la Paz?",a:"Henry Dunant",aa:["dunant"]},
{id:"nob10",dk:"Premios Nobel",q:"¬øQui√©n gan√≥ el Nobel de Literatura en 2016?",a:"Bob Dylan",aa:["dylan"]},
{id:"nob11",dk:"Premios Nobel",q:"¬øQu√© espa√±ol gan√≥ el Nobel de Medicina en 1906?",a:"Santiago Ram√≥n y Cajal",aa:["ram√≥n y cajal","cajal"]},
{id:"nob12",dk:"Premios Nobel",q:"¬øQui√©n cre√≥ el Premio Nobel?",a:"Alfred Nobel",aa:["nobel"]},
{id:"nob13",dk:"Premios Nobel",q:"¬øQui√©n gan√≥ el Nobel de Literatura en 1982?",a:"Garc√≠a M√°rquez",aa:["gabriel garc√≠a m√°rquez"]},
{id:"nob14",dk:"Premios Nobel",q:"¬øEn qu√© ciudad se entrega el Nobel de la Paz?",a:"Oslo",aa:[]},
{id:"nob15",dk:"Premios Nobel",q:"¬øEn qu√© a√±o se cre√≥ el Nobel de Econom√≠a?",a:"1968",aa:[]},
{id:"nob16",dk:"Premios Nobel",q:"¬øQu√© organizaci√≥n recibi√≥ el Nobel de la Paz en 1977?",a:"Amnist√≠a Internacional",aa:["amnesty international"]},
{id:"nob17",dk:"Premios Nobel",q:"¬øQu√© espa√±ol gan√≥ el Nobel de Literatura en 1977?",a:"Vicente Aleixandre",aa:["aleixandre"]},
{id:"nob18",dk:"Premios Nobel",q:"¬øQu√© escritora polaca gan√≥ el Nobel de Literatura en 2018?",a:"Olga Tokarczuk",aa:["tokarczuk"]},
{id:"nob19",dk:"Premios Nobel",q:"¬øCon qu√© Nobel se reconoci√≥ el descubrimiento del ADN?",a:"Nobel de Medicina",aa:["fisiolog√≠a y medicina"]},
{id:"nob20",dk:"Premios Nobel",q:"¬øQui√©n gan√≥ el Nobel de F√≠sica junto a Marie Curie en 1903?",a:"Pierre Curie",aa:["curie"]},
{id:"mit01",dk:"Mitolog√≠a",q:"¬øQui√©n es el dios griego del mar?",a:"Poseid√≥n",aa:["neptuno"]},
{id:"mit02",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el mensajero de los dioses griegos?",a:"Hermes",aa:["mercurio"]},
{id:"mit03",dk:"Mitolog√≠a",q:"¬øQui√©n es la diosa griega del amor?",a:"Afrodita",aa:["venus"]},
{id:"mit04",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el h√©roe griego que mat√≥ al Minotauro?",a:"Teseo",aa:[]},
{id:"mit05",dk:"Mitolog√≠a",q:"¬øQui√©n es el dios griego del sol?",a:"Apolo",aa:[]},
{id:"mit06",dk:"Mitolog√≠a",q:"Con la D: laberinto o confusi√≥n (mitolog√≠a)",a:"d√©dalo",aa:["dedalo"]},
{id:"mit07",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el r√≠o de los muertos en la mitolog√≠a griega?",a:"Estigia",aa:["estige"]},
{id:"mit08",dk:"Mitolog√≠a",q:"¬øQui√©n encaden√≥ a Prometeo?",a:"Zeus",aa:[]},
{id:"mit09",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el dios n√≥rdico del trueno?",a:"Thor",aa:[]},
{id:"mit10",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el perro guardi√°n del Hades?",a:"Cerbero",aa:[]},
{id:"mit11",dk:"Mitolog√≠a",q:"Con la Q: monstruo con cabeza de le√≥n y cola de drag√≥n",a:"quimera",aa:[]},
{id:"mit12",dk:"Mitolog√≠a",q:"¬øQui√©n es el dios griego de la guerra?",a:"Ares",aa:["marte"]},
{id:"mit13",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama la ninfa que se enamor√≥ de Narciso?",a:"Eco",aa:[]},
{id:"mit14",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el rey que todo lo tocaba se convert√≠a en oro?",a:"Midas",aa:["rey midas"]},
{id:"mit15",dk:"Mitolog√≠a",q:"¬øQui√©n es la diosa griega de la sabidur√≠a?",a:"Atenea",aa:["minerva"]},
{id:"mit16",dk:"Mitolog√≠a",q:"¬øC√≥mo se llaman los gemelos que fundaron Roma?",a:"R√≥mulo y Remo",aa:["romulo y remo"]},
{id:"mit17",dk:"Mitolog√≠a",q:"¬øQu√© h√©roe griego complet√≥ doce trabajos?",a:"H√©rcules",aa:["heracles"]},
{id:"mit18",dk:"Mitolog√≠a",q:"¬øC√≥mo se llama el barquero del Hades?",a:"Caronte",aa:[]},
{id:"mit19",dk:"Mitolog√≠a",q:"¬øQui√©n es el dios griego del vino?",a:"Dioniso",aa:["baco"]},
{id:"mit20",dk:"Mitolog√≠a",q:"Con la E: manifestaci√≥n o revelaci√≥n; festividad del 6 de enero",a:"epifan√≠a",aa:["epifania"]},
];
// ‚ïê‚ïê‚ïê ROSCO QUESTIONS ‚ïê‚ïê‚ïê
const RQ={
A:{d:"Con la A: Sin cabeza o sin jefe",a:"ac√©falo"},
B:{d:"Con la B: Anfibio, seg√∫n la RAE",a:"batracio"},
C:{d:"Con la C: Purificaci√≥n ritual o liberaci√≥n interior profunda",a:"catarsis"},
D:{d:"Con la D: Laberinto, lugar del que es dif√≠cil salir",a:"d√©dalo"},
E:{d:"Con la E: Insigne, ilustre",a:"egregio"},
F:{d:"Con la F: √çdolo con poderes sobrenaturales",a:"fetiche"},
G:{d:"Con la G: Que vive en reba√±o o sigue las ideas ajenas",a:"gregario"},
H:{d:"Con la H: Doctrina que proclama el placer como fin supremo",a:"hedonismo"},
I:{d:"Con la I: Que rechaza la autoridad de maestros y normas",a:"iconoclasta"},
J:{d:"Con la J: Alabanza propia, arrogante y presuntuosa",a:"jactancia"},
K:{d:"Con la K: Acto por el que Dios se despoj√≥ de su condici√≥n divina",a:"k√©nosis"},
L:{d:"Con la L: Breve y conciso en el modo de hablar",a:"lac√≥nico"},
M:{d:"Con la M: Paralizaci√≥n total en lo moral o f√≠sico",a:"marasmo"},
N:{d:"Con la N: Cementerio de gran extensi√≥n con monumentos funerarios",a:"necr√≥polis"},
√ë:{d:"Con la √ë: Dicho de algo soso, aburrido o sensiblero (coloquial)",a:"√±o√±o"},
O:{d:"Con la O: Parte de la metaf√≠sica que trata del ser en general",a:"ontolog√≠a"},
P:{d:"Con la P: Manuscrito antiguo con huellas de escritura anterior borrada",a:"palimpsesto"},
Q:{d:"Con la Q: Monstruo con cabeza de le√≥n, vientre de cabra y cola de drag√≥n",a:"quimera"},
R:{d:"Con la R: Capacidad de adaptaci√≥n frente a un agente perturbador",a:"resiliencia"},
S:{d:"Con la S: Que vive con lujo y refinamiento",a:"sibarita"},
T:{d:"Con la T: Persona que hace o dice que hace milagros",a:"taumaturgo"},
U:{d:"Con la U: Muy abundante y f√©rtil",a:"ub√©rrimo"},
V:{d:"Con la V: Que causa humillaci√≥n o verg√ºenza",a:"vejatorio"},
W:{d:"Con la W: Whisky escoc√©s con denominaci√≥n de origen (anglicismo)",a:"whisky"},
X:{d:"Con la X: Arte de grabar en madera",a:"xilograf√≠a"},
Y:{d:"Con la Y: Inhabitado, despoblado; o sin cultivar",a:"yermo"},
Z:{d:"Con la Z: Bruto y tonto (coloquial)",a:"zopenco"},
};

// ‚ïê‚ïê‚ïê ROSCO ROTATIVO ‚ïê‚ïê‚ïê
// Pool de definiciones por letra para rotar entre partidas
const RQ_POOL={
  A:[{d:"Con la A: Sin cabeza o sin jefe",a:"ac√©falo"},{d:"Con la A: Dicho de una planta: Que carece de tallo",a:"acaule"},{d:"Con la A: Que no tiene due√±o",a:"abacero"},{d:"Con la A: Privaci√≥n del habla",a:"afasia"}],
  B:[{d:"Con la B: Anfibio, seg√∫n la RAE",a:"batracio"},{d:"Con la B: Adorno de hilos colgantes en telas",a:"borla"},{d:"Con la B: Relativo a la boca",a:"bucal"},{d:"Con la B: Enga√±o o fraude en tratos",a:"camama"}],
  C:[{d:"Con la C: Purificaci√≥n ritual o liberaci√≥n interior",a:"catarsis"},{d:"Con la C: Arte de cocinar",a:"culinaria"},{d:"Con la C: Figura ret√≥rica de repetici√≥n al inicio",a:"an√°fora"}],
  D:[{d:"Con la D: Laberinto del que es dif√≠cil salir",a:"d√©dalo"},{d:"Con la D: Relativo a los dientes",a:"dental"},{d:"Con la D: Perteneciente al d√≠a",a:"diurno"}],
  E:[{d:"Con la E: Insigne, ilustre",a:"egregio"},{d:"Con la E: Vago, sutil, vaporoso",a:"et√©reo"},{d:"Con la E: Que padece insomnio",a:"estoico"}],
  F:[{d:"Con la F: √çdolo con poderes sobrenaturales",a:"fetiche"},{d:"Con la F: Instrumento de viento grave de madera",a:"fagot"},{d:"Con la F: Corriente de lava solidificada",a:"colada"}],
  G:[{d:"Con la G: Que sigue las ideas ajenas",a:"gregario"},{d:"Con la G: Conjunto de personas que comparten algo",a:"gremio"}],
  H:[{d:"Con la H: Doctrina que proclama el placer como fin",a:"hedonismo"},{d:"Con la H: Persona con siete dedos en cada mano",a:"heptad√°ctilo"},{d:"Con la H: Relativo a la sangre",a:"hematol√≥gico"}],
  I:[{d:"Con la I: Que rechaza la autoridad y las normas",a:"iconoclasta"},{d:"Con la I: Sin instrucci√≥n ni conocimientos",a:"ignaro"},{d:"Con la I: Que no se puede borrar",a:"imborrable"}],
  J:[{d:"Con la J: Alabanza propia arrogante",a:"jactancia"},{d:"Con la J: Planta gram√≠nea de tallo ca√±a",a:"junco"}],
  K:[{d:"Con la K: Acto por el que Dios se despoj√≥ de lo divino",a:"k√©nosis"},{d:"Con la K: Unidad de masa del SI",a:"kilogramo"}],
  L:[{d:"Con la L: Breve y conciso al hablar",a:"lac√≥nico"},{d:"Con la L: Inclinaci√≥n excesiva al placer sexual",a:"libidinoso"},{d:"Con la L: Que alaba o celebra",a:"laudatorio"}],
  M:[{d:"Con la M: Paralizaci√≥n total moral o f√≠sica",a:"marasmo"},{d:"Con la M: Falta de luz o claridad",a:"mohosidad"},{d:"Con la M: Perteneciente a la ma√±ana",a:"matutino"}],
  N:[{d:"Con la N: Cementerio de gran extensi√≥n",a:"necr√≥polis"},{d:"Con la N: Fen√≥meno que ocurre de noche",a:"nocturno"},{d:"Con la N: Que es blanco como la nieve",a:"n√≠veo"}],
  O:[{d:"Con la O: Parte de la metaf√≠sica sobre el ser",a:"ontolog√≠a"},{d:"Con la O: Piedra preciosa de colores cambiantes",a:"√≥palo"},{d:"Con la O: Que no deja pasar la luz",a:"opaco"}],
  P:[{d:"Con la P: Manuscrito antiguo con escritura anterior borrada",a:"palimpsesto"},{d:"Con la P: P√°jaro con el pico en forma de cruz",a:"piquituerto"},{d:"Con la P: Tiempo del trabajo de un d√≠a",a:"peonada"}],
  Q:[{d:"Con la Q: Monstruo con cabeza de le√≥n y cola de drag√≥n",a:"quimera"},{d:"Con la Q: Relativo a la qu√≠mica",a:"qu√≠mico"}],
  R:[{d:"Con la R: Capacidad de adaptaci√≥n ante perturbaciones",a:"resiliencia"},{d:"Con la R: Arte de hablar con elocuencia",a:"ret√≥rica"},{d:"Con la R: Persona que declama poemas √©picos",a:"rapsoda"}],
  S:[{d:"Con la S: Que vive con lujo y refinamiento",a:"sibarita"},{d:"Con la S: Con mucha grasa o gordura",a:"seboso"},{d:"Con la S: Argumento circular que se prueba a s√≠ mismo",a:"sorites"}],
  T:[{d:"Con la T: Que hace o dice que hace milagros",a:"taumaturgo"},{d:"Con la T: Planta de flores amarillas usada como colorante",a:"tagete"},{d:"Con la T: Proposici√≥n que se repite sin a√±adir info",a:"tautolog√≠a"}],
  U:[{d:"Con la U: Muy abundante y f√©rtil",a:"ub√©rrimo"},{d:"Con la U: Que est√° en todas partes al mismo tiempo",a:"ubicuo"}],
  V:[{d:"Con la V: Que causa humillaci√≥n o verg√ºenza",a:"vejatorio"},{d:"Con la V: Que se puede vender",a:"vendible"},{d:"Con la V: Relativo a la vejez",a:"vetusto"}],
  W:[{d:"Con la W: Bebida alcoh√≥lica de origen escoc√©s o irland√©s",a:"whisky"},{d:"Con la W: Red inform√°tica mundial (anglicismo)",a:"web"}],
  X:[{d:"Con la X: Arte de grabar en madera",a:"xilograf√≠a"},{d:"Con la X: Planta acu√°tica de hojas flotantes",a:"nen√∫far"}],
  Y:[{d:"Con la Y: Inhabitado, despoblado o sin cultivar",a:"yermo"},{d:"Con la Y: Relativo al yo filos√≥fico",a:"yo√≠smo"}],
  Z:[{d:"Con la Z: Bruto y tonto (coloquial)",a:"zopenco"},{d:"Con la Z: Calzado de cuero que cubre pie y pierna",a:"zapat√≥n"},{d:"Con la Z: Planta con flores t√≠pica de jardines",a:"zinnia"}],
  √ë:[{d:"Con la √ë: Soso, aburrido o sensiblero",a:"√±o√±o"},{d:"Con la √ë: Tiempo del trabajo de un d√≠a",a:"peonada"}]
};

// √çndices actuales por letra
let rqIdx={};

function getNextRQ(letter){
  if(!RQ_POOL[letter]||!RQ_POOL[letter].length)return RQ[letter]||null;
  if(rqIdx[letter]===undefined)rqIdx[letter]=0;
  const pool=RQ_POOL[letter];
  const q=pool[rqIdx[letter]%pool.length];
  rqIdx[letter]++;
  return q;
}

function buildRoscoSet(){
  // Construye el set actual de preguntas del rosco rotando el pool
  const set={};
  LTRS.forEach(l=>{set[l]=getNextRQ(l)||RQ[l];});
  return set;
}





// ‚ïê‚ïê‚ïê MAZO NIVEL BOTE ‚Äî Cerrojos RAE ‚ïê‚ïê‚ïê
const CERROJOS=[
{id:"cz01",dk:"Nivel Bote",q:"Con la A: Dicho de una planta: Que carece de tallo.",a:"acaule",aa:[]},
{id:"cz02",dk:"Nivel Bote",q:"Con la B: Adorno en bordes de telas consistente en hilos colgantes.",a:"borla",aa:["fleco"]},
{id:"cz03",dk:"Nivel Bote",q:"Con la C: Enga√±o o fraude en compras o tratos.",a:"camama",aa:[]},
{id:"cz04",dk:"Nivel Bote",q:"Con la D: Dicho de un sonido: Que se articula tocando con la lengua los dientes superiores.",a:"dental",aa:[]},
{id:"cz05",dk:"Nivel Bote",q:"Con la E: Aquello que es vago, sutil, vaporoso.",a:"et√©reo",aa:["etereo"]},
{id:"cz06",dk:"Nivel Bote",q:"Con la F: Instrumento de viento de madera con tubo largo y sonido muy grave.",a:"fagot",aa:[]},
{id:"cz07",dk:"Nivel Bote",q:"Con la G: Dicho de un animal: Que vive en grupos sin estructura social.",a:"gregario",aa:[]},
{id:"cz08",dk:"Nivel Bote",q:"Con la H: Dicho de una persona: Que tiene siete dedos en cada mano o pie.",a:"heptad√°ctilo",aa:["heptadactilo"]},
{id:"cz09",dk:"Nivel Bote",q:"Con la I: Dicho de una persona: Que no tiene instrucci√≥n ni conocimientos.",a:"ignaro",aa:["inculto"]},
{id:"cz10",dk:"Nivel Bote",q:"Con la J: Planta de la familia de las gram√≠neas, con tallo ca√±a de dos a tres metros.",a:"junco",aa:["juncos"]},
{id:"cz11",dk:"Nivel Bote",q:"Con la K: Unidad de masa del SI equivalente a mil gramos.",a:"kilogramo",aa:[]},
{id:"cz12",dk:"Nivel Bote",q:"Con la L: Dicho de una persona: Que siente inclinaci√≥n excesiva por los placeres sexuales.",a:"libidinoso",aa:[]},
{id:"cz13",dk:"Nivel Bote",q:"Con la M: Falta de luz o de claridad.",a:"mohosidad",aa:[]},
{id:"cz14",dk:"Nivel Bote",q:"Con la N: Dicho de un fen√≥meno: Que ocurre durante la noche.",a:"nocturno",aa:[]},
{id:"cz15",dk:"Nivel Bote",q:"Contiene la √ë: Tiempo empleado en el trabajo de un d√≠a.",a:"peonada",aa:[]},
{id:"cz16",dk:"Nivel Bote",q:"Con la O: Piedra preciosa, variedad del cuarzo, de colores cambiantes.",a:"√≥palo",aa:["opalo"]},
{id:"cz17",dk:"Nivel Bote",q:"Con la P: Dicho de un p√°jaro: Que tiene el pico en forma de cruz.",a:"piquituerto",aa:[]},
{id:"cz18",dk:"Nivel Bote",q:"Con la R: Arte de hablar con elocuencia para deleitar, conmover o persuadir.",a:"ret√≥rica",aa:["retorica"]},
{id:"cz19",dk:"Nivel Bote",q:"Con la S: Dicho de una persona: Que tiene mucha grasa o gordura.",a:"seboso",aa:[]},
{id:"cz20",dk:"Nivel Bote",q:"Con la T: Planta herb√°cea de flores amarillas usada como colorante.",a:"tagete",aa:[]},
{id:"cz21",dk:"Nivel Bote",q:"Con la U: Dicho de algo: Que est√° en todas partes al mismo tiempo.",a:"ubicuo",aa:[]},
{id:"cz22",dk:"Nivel Bote",q:"Con la V: Que se puede vender.",a:"vendible",aa:["venal"]},
{id:"cz23",dk:"Nivel Bote",q:"Con la X: Arte de grabar en madera para imprimir.",a:"xilograf√≠a",aa:["xilografia"]},
{id:"cz24",dk:"Nivel Bote",q:"Con la Y: Parte de la filosof√≠a que estudia los valores morales.",a:"yo√≠smo",aa:[]},
{id:"cz25",dk:"Nivel Bote",q:"Con la Z: Calzado de cuero que cubre el pie y parte de la pierna.",a:"zapat√≥n",aa:[]},
];


// ‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê
const SK='ppro5';
let S={
  selectedDecks:Object.keys(DECKS),
  srs:{},vSRS:{},
  stats:{streak:0,lastDate:'',seen:0,correct:0},
  custom:[],
  settings:{roscoTimer:true},
  aiDecks:{},
  todaySeen:new Set(),
  lastBackup:0,
  roscoHistory:[],      // [{date, correct, wrong, total, pct}]
  customRQ:{},          // letras con preguntas personalizadas/IA
  gagPool:{shown:[],remaining:[]},
  tosAccepted:false,
  tosDate:''
};
function load(){
  try{
    const r=localStorage.getItem(SK);
    if(r){
      const d=JSON.parse(r);
      Object.assign(S,d);
      // Reconstruct Set from array (JSON doesn't serialize Set)
      S.todaySeen=new Set(d.todaySeen||[]);
    }
  }catch(e){S.todaySeen=new Set();}
}
function save(){
  try{
    const toStore={...S,todaySeen:[...S.todaySeen]};
    localStorage.setItem(SK,JSON.stringify(toStore));
  }catch(e){}
}

// Reset todaySeen cada d√≠a nuevo
function checkDayReset(){
  const today=new Date().toDateString();
  if(S.stats.lastDate!==today){
    S.todaySeen=new Set();
  }
}

// ‚ïê‚ïê‚ïê SRS ‚Äî intervalos reales seg√∫n petici√≥n de Noemi Folgado Molina ‚ïê‚ïê‚ïê
// r=0 Otra vez ‚Üí ma√±ana (1 d√≠a) ‚Äî refuerzo cognitivo al d√≠a siguiente
// r=1 Dif√≠cil   ‚Üí 3 d√≠as       ‚Äî esa semana
// r=2 Bien      ‚Üí 15 d√≠as
// r=3 F√°cil     ‚Üí 30 d√≠as m√≠nimo
function getSRS(id){return S.srs[id]||{iv:1,ease:2.5,due:0,reps:0,lap:0};}
function rateSRS(id,r){
  let c=getSRS(id);
  let{iv,ease,reps,lap}=c;
  let days;
  if(r===0){days=1;lap++;reps=0;ease=Math.max(1.3,ease-0.2);}
  else if(r===1){days=3;ease=Math.max(1.3,ease-0.15);}
  else if(r===2){days=reps<2?15:Math.max(15,Math.round(iv*ease));reps++;ease=Math.min(2.8,ease+0.05);}
  else{days=reps<2?30:Math.max(30,Math.round(iv*ease*1.3));reps++;ease=Math.min(3.0,ease+0.15);}
  S.srs[id]={iv:days,ease,due:Date.now()+days*86400000,reps,lap};
  S.todaySeen.add(id);
  save();
}

function allQ(){
  return[
    ...QQ,
    ...CERROJOS,
    ...S.custom.filter(v=>v.a&&v.q),
    ...Object.values(S.aiDecks).flat().filter(v=>v.a&&v.q)
  ];
}

// getDue ‚Äî filtra por fecha Y por no vistos hoy
function getDue(){
  const now=Date.now();
  const today=new Date().toDateString();
  const sel=new Set(S.selectedDecks);
  return allQ()
    .filter(q=>{
      if(!sel.has(q.dk))return false;
      if(S.todaySeen.has(q.id))return false; // NO repetir en mismo d√≠a
      const c=getSRS(q.id);
      return c.reps===0||c.due<=now;
    })
    .sort((a,b)=>{
      const an=getSRS(a.id).reps===0,bn=getSRS(b.id).reps===0;
      if(an&&!bn)return -1;if(!an&&bn)return 1;
      return getSRS(a.id).due-getSRS(b.id).due;
    });
}

function norm(s){return(s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9\s]/g,'').trim().replace(/\s+/g,' ');}
function lev(a,b){if(Math.abs(a.length-b.length)>2)return 99;const m=[];for(let i=0;i<=a.length;i++){m[i]=[i];for(let j=1;j<=b.length;j++)m[i][j]=i===0?j:Math.min(m[i-1][j]+1,m[i][j-1]+1,m[i-1][j-1]+(a[i-1]!==b[j-1]?1:0));}return m[a.length][b.length];}
function chk(inp,q){const n=norm(inp);if(!n)return false;for(const t of[q.a,...(q.aa||[])].map(norm)){if(n===t||t.length>4&&lev(n,t)<=1)return true;}return false;}
function shuf(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]];}return b;}
function rnd(arr){return arr[Math.floor(Math.random()*arr.length)];}

// ‚ïê‚ïê‚ïê GAGS NOEMI ‚Äî din√°micos, con gracia real ‚ïê‚ïê‚ïê
const GAGS={
  excelente:[
    'üèÜ Glasgow 15/15. Nivel de consciencia enciclop√©dico.',
    'üèÜ RCP exitosa. Esa respuesta ha resucitado la pregunta.',
    'üèÜ Saturaci√≥n al 100%. Sin O‚ÇÇ suplementario.',
    'üèÜ Diagn√≥stico: conocimiento en estadio IV. El bueno.',
    'üèÜ Constantes vitales estables. Noemi, eres la fil√≥loga de la UCI.',
    'üèÜ Sin complicaciones postoperatorias. Texto perfecto.',
    'üèÜ La RAE te debe una c√°tedra.',
    'üèÜ Roberto Leal est√° sudando. T√∫ no.',
    'üèÜ Tu hija alg√∫n d√≠a aprender√° estas palabras. T√∫ ya las sabes.',
    'üèÜ Nivel bote desbloqueado. Llama a tu banco.',
  ],
  bien:[
    'üéâ Buen turno, Noemi. La fil√≥loga est√° despierta.',
    'üéâ Notable. Como un electro sin arritmias ‚Äî todo en orden.',
    'üéâ Tensi√≥n arterial del conocimiento: √≥ptima.',
    'üéâ Tu hija estar√≠a orgullosa... si supiera lo que es un palimpsesto.',
    'üéâ Casi. Solo falta el bote, pero vas camino de √©l.',
    'üéâ Bien documentado. La RAE te debe una beca.',
    'üéâ Un 70% en Pasapalabra es lo que separa el concursante del ganador.',
    'üéâ Guardia productiva. El mazo de cerrojos ya tiembla.',
  ],
  aprobado:[
    'üòä Aprobado. En UCI eso ya cuenta para vivir.',
    'üòä Regular, pero vivo. Sigue.',
    'üòä Como una v√≠a en el dorso de la mano: funciona, pero hay mejores opciones.',
    'üòä Sigue as√≠ y en tres semanas le explicas la catarsis a tus pacientes.',
    'üòä Nivel guardia de noche: funcional pero mejorable.',
    'üòä La resiliencia es exactamente esto: volver al mazo en el siguiente turno.',
    'üòä Tu hija dir√≠a: "Mam√°, t√∫ puedes." Tiene raz√≥n, pero estudia m√°s.',
  ],
  flojo:[
    'üí™ Error de medicaci√≥n leve. Sin consecuencias. Revisar protocolo.',
    'üí™ Glasgow bajo, pero reversible. T√∫ puedes con esto y con un turno de 12h.',
    'üí™ Hasta el mejor intensivista tiene noches de guardia malas.',
    'üí™ La RAE tampoco se escribi√≥ en un d√≠a.',
    'üí™ El palimpsesto tambi√©n se rasp√≥ y volvi√≥ a escribirse. T√∫ igual.',
    'üí™ Como dir√≠a tu hija: "Mam√°, a estudiar." Tiene toda la raz√≥n.',
    'üí™ Diagn√≥stico: d√©ficit de vocabulario agudo. Tratamiento: 20 minutos de mazo al d√≠a.',
    'üí™ No pasa nada. Roberto Leal tambi√©n falla. Bueno, √©l no. Pero t√∫ puedes.',
  ]
};
function getGag(pct){
  // Pool plano: todos los gags mezclados, rota cuando se agotan
  // Filtra por nivel pero usa pool global para no repetir
  const bucket=pct>=90?GAGS.excelente:pct>=70?GAGS.bien:pct>=50?GAGS.aprobado:GAGS.flojo;
  if(!S.gagPool.remaining||!S.gagPool.remaining.length){
    // Agotar = barajar todos de nuevo
    const all=[...GAGS.excelente,...GAGS.bien,...GAGS.aprobado,...GAGS.flojo];
    S.gagPool.remaining=shuf(all);
    S.gagPool.shown=[];
  }
  // Busca el primero del bucket correcto que no se haya mostrado recientemente
  let idx=S.gagPool.remaining.findIndex(m=>bucket.includes(m));
  if(idx===-1)idx=0; // fallback: cualquiera
  const msg=S.gagPool.remaining.splice(idx,1)[0];
  S.gagPool.shown.push(msg);
  save();
  return msg;
}

const SALUDOS=[
  '¬°Hola, Noemi! üë©‚Äç‚öïÔ∏è',
  'Turno de estudio, Noemi üìö',
  '¬øLista para el bote, Noemi? üèÜ',
  'Buenas, fil√≥loga de guardia üë©‚Äç‚öïÔ∏èüìñ',
  '¬°A por ellos, Noemi! üéØ',
  'El diccionario te espera, Noemi üìï',
];

// ‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê
function goTo(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  const el=document.getElementById(id);
  if(el)el.classList.add('active');
  if(id==='home')renderHome();
  if(id==='stats')renderStats();
  if(id==='ai-decks')renderAIDecks();
  if(id==='manual-deck')renderManualDeck();
}

// ‚ïê‚ïê‚ïê HOME ‚ïê‚ïê‚ïê
function renderHome(){
  const salEl=document.getElementById('app-saludo');
  if(salEl)salEl.textContent=rnd(SALUDOS);
  document.getElementById('h-v').textContent=S.stats.seen||0;
  document.getElementById('h-a').textContent=S.stats.seen>0?Math.round((S.stats.correct/S.stats.seen)*100)+'%':'0%';
  document.getElementById('h-p').textContent=Math.min(getDue().length,99);
  document.getElementById('h-r').textContent=S.stats.streak||0;
  const el=document.getElementById('deck-list');el.innerHTML='';

  // Built-in decks
  for(const[name,info]of Object.entries(DECKS)){
    const sel=S.selectedDecks.includes(name);
    const isNivelBote=name==='Nivel Bote';
    const cnt=isNivelBote?CERROJOS.length:QQ.filter(q=>q.dk===name).length;
    const d=document.createElement('div');
    d.className='di'+(sel?' sel':'')+(isNivelBote?' bote':'');
    d.innerHTML='<div class="di-icon">'+info.icon+'</div><div style="flex:1"><div class="di-name">'+name+(isNivelBote?' üî•':'')+'</div><div class="di-ct">'+cnt+' preguntas'+(isNivelBote?' ¬∑ Dificultad m√°xima':'')+'</div></div><div class="di-chk">'+(sel?'‚úì':'')+'</div>';
    d.onclick=()=>{if(sel){if(S.selectedDecks.length>1)S.selectedDecks=S.selectedDecks.filter(x=>x!==name);}else S.selectedDecks.push(name);save();renderHome();};
    el.appendChild(d);
  }
  // AI decks
  for(const[name,qs]of Object.entries(S.aiDecks)){
    const sel=S.selectedDecks.includes(name);
    const d=document.createElement('div');d.className='di'+(sel?' sel':'');
    d.innerHTML='<div class="di-icon">ü§ñ</div><div style="flex:1"><div class="di-name">'+name+'</div><div class="di-ct">'+qs.length+' preguntas ¬∑ IA</div></div><div class="di-chk">'+(sel?'‚úì':'')+'</div>';
    d.onclick=()=>{if(sel){if(S.selectedDecks.length>1)S.selectedDecks=S.selectedDecks.filter(x=>x!==name);}else S.selectedDecks.push(name);save();renderHome();};
    el.appendChild(d);
  }
  // Manual custom decks
  const manualDecks={};
  S.custom.filter(v=>v.a&&v.q).forEach(q=>{
    if(!manualDecks[q.dk])manualDecks[q.dk]=[];
    manualDecks[q.dk].push(q);
  });
  for(const[name,qs]of Object.entries(manualDecks)){
    if(DECKS[name])continue; // ya est√° arriba
    const sel=S.selectedDecks.includes(name);
    const d=document.createElement('div');d.className='di'+(sel?' sel':'');
    d.innerHTML='<div class="di-icon">‚úèÔ∏è</div><div style="flex:1"><div class="di-name">'+name+'</div><div class="di-ct">'+qs.length+' preguntas ¬∑ Manual</div></div><div class="di-chk">'+(sel?'‚úì':'')+'</div>';
    d.onclick=()=>{if(sel){if(S.selectedDecks.length>1)S.selectedDecks=S.selectedDecks.filter(x=>x!==name);}else S.selectedDecks.push(name);save();renderHome();};
    el.appendChild(d);
  }
}

// ‚ïê‚ïê‚ïê TRAIN ‚ïê‚ïê‚ïê
let tQ=[],tI=0,tC=0,tW=0,tDone=false;
function startMode(mode){
  checkDayReset();
  const sel=new Set(S.selectedDecks);
  let qs;
  if(mode==='srs'){
    qs=getDue().slice(0,20);
    if(!qs.length){
      alert('¬°Todo al d√≠a, Noemi! üß†\n\nEl algoritmo SRS est√° haciendo su trabajo.\nNinguna pregunta vencida hoy.\n\n¬øPruebas el modo R√°pido?');
      return;
    }
  } else {
    // Modo r√°pido: no repetir lo ya visto hoy
    qs=shuf(allQ().filter(q=>sel.has(q.dk)&&!S.todaySeen.has(q.id))).slice(0,20);
    if(!qs.length){
      alert('Ya has visto todas las preguntas disponibles hoy, Noemi Folgado Molina.\n¬°Vuelve ma√±ana o activa m√°s mazos! üí™');
      return;
    }
  }
  tQ=qs;tI=0;tC=0;tW=0;goTo('train');loadQ();
}

function loadQ(){
  if(tI>=tQ.length){showSum();return;}
  tDone=false;
  const q=tQ[tI];
  const deckIcon=DECKS[q.dk]?.icon||(q.dk==='Nivel Bote'?'üîí':'ü§ñ');
  document.getElementById('t-dk').textContent=deckIcon+' '+q.dk;
  document.getElementById('t-lbl').textContent='PREGUNTA '+(tI+1)+'/'+tQ.length;
  document.getElementById('t-q').textContent=q.q;
  const ai=document.getElementById('t-ai');
  ai.value='';ai.className='ai';ai.disabled=false;
  document.getElementById('t-sub').style.display='';
  document.getElementById('t-fb').className='fb';
  document.getElementById('t-anki').className='anki-row';
  document.getElementById('t-pb').style.width=(tI/tQ.length*100)+'%';
  document.getElementById('t-ct').textContent=(tI+1)+'/'+tQ.length;
  setTimeout(()=>ai.focus(),80);
}

function subAns(){
  if(tDone)return;
  const q=tQ[tI];
  const val=document.getElementById('t-ai').value.trim();
  if(!val)return;
  tDone=true;
  const ai=document.getElementById('t-ai');ai.disabled=true;
  document.getElementById('t-sub').style.display='none';
  const ok=chk(val,q);
  if(ok){tC++;ai.className='ai ok';}else{tW++;ai.className='ai bad';}
  const fb=document.getElementById('t-fb');
  fb.className='fb '+(ok?'ok':'bad')+' show';
  // Sin√≥nimos si es vocab RAE
  const sinData=VOCAB.find(v=>v.word&&norm(v.word)===norm(q.a));
  const sinStr=sinData&&sinData.sin√≥nimos?'\nüìö Sin.: '+sinData.sin√≥nimos:'';
  // Link RAE si falla
  const raeStr=!ok?'\nüîó dle.rae.es/'+encodeURIComponent(norm(q.a)):'';
  document.getElementById('t-fb-a').textContent=ok?'‚úÖ ¬°Correcto!':'‚ùå '+q.a+sinStr;
  S.stats.seen=(S.stats.seen||0)+1;
  if(ok)S.stats.correct=(S.stats.correct||0)+1;
  S.todaySeen.add(q.id);
  save();
  document.getElementById('t-anki').className='anki-row show';
}

function rateQ(r){rateSRS(tQ[tI].id,r);tI++;loadQ();}

function skipQ(){
  if(tDone)return;
  tDone=true;tW++;
  const q=tQ[tI];
  const ai=document.getElementById('t-ai');ai.disabled=true;
  document.getElementById('t-sub').style.display='none';
  const sinData=VOCAB.find(v=>v.word&&norm(v.word)===norm(q.a));
  const sinStr=sinData&&sinData.sin√≥nimos?'\nüìö Sin.: '+sinData.sin√≥nimos:'';
  document.getElementById('t-fb').className='fb bad show';
  document.getElementById('t-fb-a').textContent='‚ùå '+q.a+sinStr;
  S.stats.seen=(S.stats.seen||0)+1;
  S.todaySeen.add(q.id);
  save();
  document.getElementById('t-anki').className='anki-row show';
}

function showSum(){
  const total=tC+tW,pct=total>0?Math.round(tC/total*100):0;
  const msg=getGag(pct);
  const parts=msg.split(' ');
  document.getElementById('sum-e').textContent=parts[0];
  document.getElementById('sum-t').textContent=parts.slice(1).join(' ');
  document.getElementById('sum-c').textContent=tC;
  document.getElementById('sum-w').textContent=tW;
  // Reset btns to normal (not rosco)
  const sb=document.getElementById('sum-btns');
  sb.innerHTML='';
  const hb=document.createElement('button');
  hb.className='btn-start';hb.style.maxWidth='260px';
  hb.textContent='Volver al inicio';hb.onclick=function(){goTo('home');};
  sb.appendChild(hb);
  document.getElementById('rosco-history').innerHTML='';
  updStreak();
  checkWeeklyBackup();
  goTo('summary');
}

function updStreak(){
  const today=new Date().toDateString();
  if(S.stats.lastDate!==today){
    const yest=new Date(Date.now()-86400000).toDateString();
    S.stats.streak=S.stats.lastDate===yest?(S.stats.streak||0)+1:1;
    S.stats.lastDate=today;
    save();
  }
}

// ‚ïê‚ïê‚ïê BACKUP SEMANAL AUTOM√ÅTICO ‚ïê‚ïê‚ïê
function checkWeeklyBackup(){
  const now=Date.now();
  const week=7*24*60*60*1000;
  if(!S.lastBackup||now-S.lastBackup>week){
    S.lastBackup=now;save();
    doBackup(true); // silencioso
  }
}
function doBackup(silent){
  const b=new Blob([JSON.stringify(S,null,2)],{type:'application/json'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(b);
  const d=new Date().toISOString().slice(0,10);
  a.download='ppro_noemi_backup_'+d+'.json';
  a.click();
  if(!silent)alert('‚úÖ Copia de seguridad descargada: ppro_noemi_backup_'+d+'.json');
}

// ‚ïê‚ïê‚ïê VOCAB ‚ïê‚ïê‚ïê
let vQ=[],vI=0,vFlip=false;
function startVocab(){
  checkDayReset();
  const all=[...VOCAB,...S.custom.filter(v=>v.definition_ES)];
  vQ=shuf(all)
    .sort((a,b)=>{const o={no:0,rev:1,si:2};return(o[S.vSRS[a.id]]??1)-(o[S.vSRS[b.id]]??1);})
    .slice(0,20);
  vI=0;vFlip=false;goTo('vocab');loadV();
}
function loadV(){
  if(vI>=vQ.length){goTo('home');return;}
  vFlip=false;
  const v=vQ[vI];
  document.getElementById('vcard').className='vcard';
  const def=v.definition_ES||'(Sin definici√≥n)';
  const dot2=def.indexOf('2.');
  const front=dot2>0?def.slice(0,dot2).trim():def;
  document.getElementById('v-fd').textContent=front;
  // Format back definition with line breaks between acepciones
  const fmtDef=def.replace(/\s*(\d+\.\s)/g,'\n$1').trim();
  document.getElementById('v-bd').textContent=fmtDef;
  document.getElementById('v-tags').innerHTML=(v.topic_tags||[]).map(t=>'<span class="vtag">'+t+'</span>').join('');
  document.getElementById('v-w').textContent=v.word;
  // (v-bd set above with formatting)
  const sin=document.getElementById('v-sin');
  if(v.sin√≥nimos&&v.sin√≥nimos.trim()){sin.style.display='block';document.getElementById('v-sin-t').textContent=v.sin√≥nimos;}
  else sin.style.display='none';
  const ex=document.getElementById('v-ex');
  if(v.example_sentence&&v.example_sentence.trim()){ex.style.display='block';document.getElementById('v-ex-t').textContent=v.example_sentence;}
  else ex.style.display='none';
  const tip=document.getElementById('v-tip');
  if(v.memory_tip&&v.memory_tip.trim()){tip.style.display='block';document.getElementById('v-tip-t').textContent=v.memory_tip;}
  else tip.style.display='none';
  document.getElementById('v-rae').href='https://dle.rae.es/'+encodeURIComponent(v.word.toLowerCase());
  document.getElementById('v-rate').style.display='none';
  document.getElementById('v-pb').style.width=(vI/vQ.length*100)+'%';
  document.getElementById('v-ct').textContent=(vI+1)+'/'+vQ.length;
}
function flipCard(){if(vFlip)return;vFlip=true;document.getElementById('vcard').className='vcard flipped';document.getElementById('v-rate').style.display='flex';}
function rateV(r){S.vSRS[vQ[vI].id]=r;save();vI++;loadV();}

// ‚ïê‚ïê‚ïê ROSCO ‚Äî PASA fix definitivo ‚ïê‚ïê‚ïê
const LTRS='ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ'.split('');
let rSt={},rCur='A',rTmr=null,rSec=150;

let currentRQ={};
function startRosco(){
  currentRQ=buildRoscoSet();
  rSt={};LTRS.forEach(l=>rSt[l]='pend');
  rCur='A';rSec=150;
  buildRSVG();goTo('rosco');
  hlLetter('A');showRDef('A');
  startRTmr();updRStats();
  setTimeout(()=>{const inp=document.getElementById('r-in');if(inp)inp.focus();},400);
}
function buildRSVG(){
  const svg=document.getElementById('rosco-svg');
  if(!svg)return;
  const cx=110,cy=110,r=95,n=LTRS.length;let h='';
  for(let i=0;i<n;i++){
    const a=(i/n)*2*Math.PI-Math.PI/2;
    const x=(cx+r*Math.cos(a)).toFixed(1),y=(cy+r*Math.sin(a)).toFixed(1),l=LTRS[i];
    h+=`<g class="rl" id="rl-${l}" onclick="selLetter('${l}')"><circle cx="${x}" cy="${y}" r="12" fill="#1e1e2e" stroke="#2a2a38" stroke-width="1.5" id="rc-${l}"/><text x="${x}" y="${(parseFloat(y)+4).toFixed(1)}" text-anchor="middle" font-size="10" font-family="Syne" font-weight="700" fill="#f0f0f5" id="rt-${l}">${l}</text></g>`;
  }
  svg.innerHTML=h;
}
function selLetter(l){
  if(rSt[l]==='ok'||rSt[l]==='bad')return;
  rCur=l;hlLetter(l);showRDef(l);
  const inp=document.getElementById('r-in');
  if(inp){inp.value='';inp.focus();}
}
function hlLetter(cur){
  LTRS.forEach(l=>{
    const c=document.getElementById('rc-'+l),t=document.getElementById('rt-'+l);
    if(!c)return;
    const s=rSt[l];
    c.setAttribute('fill',s==='ok'?'#1a3a2a':s==='bad'?'#3a1a1a':s==='pasa'?'#152030':l===cur?'#2a2a0a':'#1e1e2e');
    c.setAttribute('stroke',s==='ok'?'#3ecf72':s==='bad'?'#ff5555':s==='pasa'?'#4a9eff':l===cur?'#f5c842':'#2a2a38');
    c.setAttribute('stroke-width',l===cur?'2.5':'1.5');
    t.setAttribute('fill',s==='ok'?'#3ecf72':s==='bad'?'#ff5555':s==='pasa'?'#4a9eff':l===cur?'#f5c842':'#f0f0f5');
  });
}
function showRDef(l){
  const el=document.getElementById('r-def');
  const cq=currentRQ[l]||RQ[l];if(el)el.textContent=cq?cq.d:'...';
}
function subRosco(){
  const inp=document.getElementById('r-in');
  const val=inp?inp.value.trim():'';
  if(!val||!rCur)return;
  const q=currentRQ[rCur]||RQ[rCur];if(!q)return;
  const ok=norm(val)===norm(q.a)||lev(norm(val),norm(q.a))<=1;
  rSt[rCur]=ok?'ok':'bad';
  updRStats();hlLetter(rCur);
  if(inp)inp.value='';
  if(!ok){
    const defEl=document.getElementById('r-def');
    if(defEl)defEl.textContent='‚ùå Era: '+q.a;
    // Vibraci√≥n haptica si disponible
    if(navigator.vibrate)navigator.vibrate(80);
    setTimeout(()=>nextRL(rCur),1600);
  } else {
    if(navigator.vibrate)navigator.vibrate([30,20,30]);
    nextRL(rCur);
  }
}

// PASA ‚Äî salta a siguiente en sentido horario, SIEMPRE funciona
function pasaR(){
  if(!rCur)return;
  const from=rCur;
  rSt[rCur]='pasa';
  hlLetter(rCur);
  const inp=document.getElementById('r-in');
  if(inp)inp.value='';
  nextRL(from);
}

// nextRL ‚Äî busca siguiente disponible en sentido horario desde 'from'
function nextRL(from){
  const available=LTRS.filter(l=>rSt[l]==='pend'||rSt[l]==='pasa');
  if(!available.length){stopRosco();return;}
  const startIdx=LTRS.indexOf(from||rCur);
  // Prioridad: pend antes que pasa, en orden horario
  for(let i=1;i<=LTRS.length;i++){
    const l=LTRS[(startIdx+i)%LTRS.length];
    if(rSt[l]==='pend'){rCur=l;hlLetter(l);showRDef(l);const inp=document.getElementById('r-in');if(inp)inp.focus();return;}
  }
  for(let i=1;i<=LTRS.length;i++){
    const l=LTRS[(startIdx+i)%LTRS.length];
    if(rSt[l]==='pasa'){rCur=l;hlLetter(l);showRDef(l);const inp=document.getElementById('r-in');if(inp)inp.focus();return;}
  }
  stopRosco();
}

function updRStats(){
  const c=LTRS.filter(l=>rSt[l]==='ok').length,
        w=LTRS.filter(l=>rSt[l]==='bad').length,
        p=LTRS.filter(l=>rSt[l]==='pend'||rSt[l]==='pasa').length;
  document.getElementById('r-c').textContent=c;
  document.getElementById('r-w').textContent=w;
  document.getElementById('r-p').textContent=p;
  document.getElementById('r-sc').textContent=c+'‚úÖ '+w+'‚ùå';
}
function startRTmr(){
  if(rTmr)clearInterval(rTmr);
  rTmr=setInterval(()=>{
    rSec--;
    const m=Math.floor(rSec/60),s=rSec%60;
    const el=document.getElementById('r-ti');
    if(el){el.textContent=m+':'+(s<10?'0':'')+s;el.style.color=rSec<=30?'var(--red)':'var(--gold)';}
    if(rSec<=0)stopRosco();
  },1000);
}
function stopRosco(){
  if(rTmr){clearInterval(rTmr);rTmr=null;}
  const c=LTRS.filter(l=>rSt[l]==='ok').length,
        w=LTRS.filter(l=>rSt[l]==='bad').length,
        p=LTRS.filter(l=>rSt[l]==='pasa').length;
  const pct=Math.round(c/LTRS.length*100);
  // Guardar en historial
  const entry={
    date:new Date().toLocaleDateString('es-ES',{day:'2-digit',month:'2-digit',year:'2-digit',hour:'2-digit',minute:'2-digit'}),
    correct:c,wrong:w,pasa:p,total:LTRS.length,pct
  };
  S.roscoHistory.unshift(entry);
  if(S.roscoHistory.length>20)S.roscoHistory.pop(); // max 20 partidas
  save();
  // Mostrar resultado con historial
  showRoscoResult(c,w,p,pct);
}

function showRoscoResult(c,w,p,pct){
  const msg=getGag(pct);
  const parts=msg.split(' ');
  document.getElementById('sum-e').textContent=parts[0];
  document.getElementById('sum-t').textContent='Rosco '+c+'/'+LTRS.length+' ‚Äî '+parts.slice(1).join(' ');
  document.getElementById('sum-c').textContent=c;
  document.getElementById('sum-w').textContent=w;
  // Botones: nuevo rosco + volver
  const sb2=document.getElementById('sum-btns');
  sb2.innerHTML='';
  const rb=document.createElement('button');
  rb.className='btn-start';rb.style.cssText='max-width:260px;margin-bottom:8px';
  rb.textContent='Nuevo Rosco';rb.onclick=function(){startRosco();};
  const hb2=document.createElement('button');
  hb2.className='btn-act';hb2.style.maxWidth='260px';
  hb2.textContent='Volver al inicio';hb2.onclick=function(){goTo('home');};
  sb2.appendChild(rb);sb2.appendChild(hb2);
  renderRoscoHistory();
  goTo('summary');
}

function renderRoscoHistory(){
  let el=document.getElementById('rosco-history');
  if(!el)return;
  if(!S.roscoHistory.length){el.innerHTML='';return;}
  const best=Math.max(...S.roscoHistory.map(r=>r.correct));
  const avg=Math.round(S.roscoHistory.reduce((a,r)=>a+r.correct,0)/S.roscoHistory.length);
  let html='<div class="rh-header"><span style="color:var(--gold);font-family:Syne,sans-serif;font-weight:700;font-size:13px">üèÜ Historial Rosco</span><span style="font-size:11px;color:var(--text2)">Mejor: '+best+'/27 ¬∑ Media: '+avg+'/27</span></div>';
  html+='<div class="rh-list">';
  S.roscoHistory.slice(0,8).forEach((r,i)=>{
    const bar=Math.round(r.pct/100*60);
    html+=`<div class="rh-row"><span class="rh-date">${r.date}</span><div class="rh-bar"><div class="rh-fill" style="width:${bar}px"></div></div><span class="rh-score ${r.correct>=20?'gold':r.correct>=15?'green':''}">${r.correct}/27</span></div>`;
  });
  html+='</div>';
  el.innerHTML=html;
}

// ‚ïê‚ïê‚ïê STATS ‚ïê‚ïê‚ïê
function renderStats(){
  document.getElementById('st-t').textContent=S.stats.seen||0;
  document.getElementById('st-p').textContent=S.stats.seen>0?Math.round((S.stats.correct/S.stats.seen)*100)+'%':'0%';
  document.getElementById('st-r').textContent=S.stats.streak||0;
  const el=document.getElementById('st-dk');el.innerHTML='';
  const allDecks={...DECKS};
  Object.keys(S.aiDecks).forEach(n=>allDecks[n]={icon:'ü§ñ'});
  for(const[name,info]of Object.entries(allDecks)){
    const qs=name==='Nivel Bote'?CERROJOS:(S.aiDecks[name]||QQ.filter(q=>q.dk===name));
    const seen=qs.filter(q=>(S.srs[q.id]?.reps||0)>0).length;
    const pct=qs.length>0?Math.round(seen/qs.length*100):0;
    el.innerHTML+=`<div class="dp"><div class="dp-h"><span class="dp-n">${info.icon} ${name}</span><span class="dp-p">${pct}%</span></div><div class="dpbar"><div class="dpfill" style="width:${pct}%"></div></div></div>`;
  }
}

// ‚ïê‚ïê‚ïê MAZO MANUAL ‚Äî Noemi Folgado Molina a√±ade sus propias preguntas ‚ïê‚ïê‚ïê
let currentManualDeck='';
function renderManualDeck(){
  const deckName=currentManualDeck||'Mi Mazo';
  const el=document.getElementById('manual-q-list');
  if(!el)return;
  el.innerHTML='';
  const qs=S.custom.filter(v=>v.a&&v.q&&v.dk===deckName);
  qs.forEach((q,i)=>{
    const d=document.createElement('div');
    d.className='manual-q-item';
    d.innerHTML=`<div style="flex:1"><div style="font-size:13px">${q.q}</div><div style="font-size:11px;color:var(--gold)">‚Üí ${q.a}</div></div><button class="ai-del-btn" onclick="deleteManualQ('${q.id}')">üóëÔ∏è</button>`;
    el.appendChild(d);
  });
  if(!qs.length)el.innerHTML='<div style="color:var(--text2);font-size:12px;text-align:center;padding:12px">Sin preguntas a√∫n. ¬°A√±ade la primera!</div>';
  const titleEl=document.getElementById('manual-deck-title');
  if(titleEl)titleEl.textContent='‚úèÔ∏è '+deckName;
}
function openManualDeck(name){
  currentManualDeck=name||document.getElementById('new-deck-name').value.trim()||'Mi Mazo';
  if(!S.selectedDecks.includes(currentManualDeck))S.selectedDecks.push(currentManualDeck);
  save();
  goTo('manual-deck');
}
function addManualQ(){
  const q=document.getElementById('mq-q').value.trim();
  const a=document.getElementById('mq-a').value.trim();
  const aa=document.getElementById('mq-aa').value.trim();
  if(!q||!a){alert('Pregunta y respuesta son obligatorias.');return;}
  S.custom.push({
    id:'m'+Date.now(),dk:currentManualDeck,
    q,a,aa:aa?aa.split(',').map(x=>x.trim()).filter(Boolean):[],
    word:null,definition_ES:null
  });
  save();
  ['mq-q','mq-a','mq-aa'].forEach(i=>{const el=document.getElementById(i);if(el)el.value='';});
  renderManualDeck();
  const inp=document.getElementById('mq-q');if(inp)inp.focus();
}
function deleteManualQ(id){
  S.custom=S.custom.filter(q=>q.id!==id);
  save();renderManualDeck();
}
function generateForManual(){
  // Abre IA con el nombre del mazo prellenado
  const inp=document.getElementById('ai-topic');
  if(inp)inp.value=currentManualDeck;
  goTo('ai-decks');
}

// ‚ïê‚ïê‚ïê AI DECK GENERATOR ‚ïê‚ïê‚ïê
function renderAIDecks(){
  const el=document.getElementById('ai-deck-list');el.innerHTML='';
  for(const[name,qs]of Object.entries(S.aiDecks)){
    const d=document.createElement('div');d.className='ai-deck-item';
    d.innerHTML=`<div style="flex:1"><div style="font-weight:600">${name}</div><div style="font-size:12px;color:var(--text2)">${qs.length} preguntas ¬∑ IA</div></div><button class="ai-more-btn" onclick="generateMore('${name}',event)">+50 m√°s</button><button class="ai-del-btn" onclick="deleteDeck('${name}')">üóëÔ∏è</button>`;
    el.appendChild(d);
  }
  if(!Object.keys(S.aiDecks).length)
    el.innerHTML='<div style="color:var(--text2);font-size:13px;text-align:center;padding:20px">A√∫n no hay mazos IA. ¬°Crea el primero, Noemi Folgado Molina!</div>';
}
function setTopic(t){const inp=document.getElementById('ai-topic');if(inp)inp.value=t;}

async function createAIDeck(){
  const topicEl=document.getElementById('ai-topic');
  const topic=topicEl?topicEl.value.trim():'';
  if(!topic){alert('Escribe un tema primero.');return;}
  const btn=document.getElementById('ai-create-btn');
  if(btn){btn.textContent='‚è≥ Generando...';btn.disabled=true;}
  try{
    const qs=await generateQuestions(topic,50);
    if(!qs||!qs.length){alert('No se pudo generar. Intenta de nuevo.');return;}
    S.aiDecks[topic]=(S.aiDecks[topic]||[]).concat(qs);
    if(!S.selectedDecks.includes(topic))S.selectedDecks.push(topic);
    save();if(topicEl)topicEl.value='';
    renderAIDecks();renderHome();
    alert('‚úÖ Mazo "'+topic+'" creado con '+qs.length+' preguntas.\n¬°A tope, Noemi Folgado Molina! üèÜ');
  }catch(e){alert('Error al generar: '+e.message);}
  finally{if(btn){btn.textContent='‚ú® Generar 50 preguntas';btn.disabled=false;}}
}
async function generateMore(topic,ev){
  const btn=ev.target;btn.textContent='‚è≥...';btn.disabled=true;
  try{
    const existing=S.aiDecks[topic]||[];
    const qs=await generateQuestions(topic,50,existing);
    S.aiDecks[topic]=existing.concat(qs);
    save();renderAIDecks();
    alert('‚úÖ +'+qs.length+' preguntas a√±adidas a "'+topic+'"');
  }catch(e){alert('Error: '+e.message);}
  finally{btn.textContent='+50 m√°s';btn.disabled=false;}
}
function deleteDeck(name){
  if(!confirm('¬øBorrar el mazo "'+name+'"?'))return;
  delete S.aiDecks[name];S.selectedDecks=S.selectedDecks.filter(x=>x!==name);
  save();renderAIDecks();renderHome();
}

async function generateQuestions(topic,count,existing=[]){
  const existingAnswers=existing.map(q=>q.a).slice(-30).join(', ');
  const prompt=`Eres el Guionista Jefe y Jefe de Ling√º√≠stica de Pasapalabra (Antena 3). Generas preguntas de NIVEL BOTE: las m√°s dif√≠ciles, las que deciden el concurso.

TEMA: "${topic}" | CANTIDAD: exactamente ${count} preguntas

REGLAS ESTRICTAS ‚Äî NIVEL BOTE:
1. FUENTE EXCLUSIVA: Acepciones literales del DLE (RAE 23¬™ edici√≥n). Sin Wikipedia, sin par√°frasis.
2. ESTRUCTURA DLE: Usa "Dicho de una persona: Que...", "Figura ret√≥rica que consiste en...", "En bot√°nica, se dice de..."
3. OBSCURIDAD: Arca√≠smos, tecnicismos, cultismos, regionalismos. Palabras que rara vez se oyen pero est√°n en el DLE.
4. PARTICIPIOS Y ADJETIVOS: El programa siempre pide adjetivos raros, no sustantivos comunes.
5. FORMATO MIXTO: 60% "Con la [LETRA]:", 40% preguntas directas de alta dificultad.
6. ANTI-ALUCINACI√ìN: Si no conoces la definici√≥n exacta del DLE, usa t√©rminos que S√ç conozcas con certeza.
7. NO repitas: ${existingAnswers||'ninguna'}
8. RESPONDE SOLO JSON V√ÅLIDO, sin markdown, sin texto extra.

[{"id":"x1","dk":"${topic}","q":"Con la A: Dicho de una planta: Que carece de tallo.","a":"acaule","aa":[]},{"id":"x2","dk":"${topic}","q":"¬øQu√© instrumento...?","a":"respuesta","aa":["alt"]}]`;

  const response=await fetch('https://api.anthropic.com/v1/messages',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:6000,messages:[{role:'user',content:prompt}]})
  });
  if(!response.ok)throw new Error('API '+response.status);
  const data=await response.json();
  const text=data.content?.[0]?.text||'';
  const clean=text.replace(/```json|```/g,'').trim();
  const parsed=JSON.parse(clean);
  const ts=Date.now();
  return parsed.map((q,i)=>({...q,id:`${topic.slice(0,4).toLowerCase().replace(/[^a-z]/g,'')}${ts}_${i}`}));
}

// ‚ïê‚ïê‚ïê IMPORT / EXPORT ‚ïê‚ïê‚ïê
function addWord(){
  const w=document.getElementById('iw').value.trim(),d=document.getElementById('id2').value.trim();
  if(!w||!d){alert('Palabra y definici√≥n son obligatorias.');return;}
  S.custom.push({id:'c'+Date.now(),word:w,definition_ES:d,sin√≥nimos:document.getElementById('isin').value.trim(),example_sentence:document.getElementById('iex').value.trim(),memory_tip:document.getElementById('itip').value.trim(),topic_tags:['personalizado'],dk:'Vocabulario',q:null,a:null,aa:[]});
  save();['iw','id2','isin','iex','itip'].forEach(i=>{const el=document.getElementById(i);if(el)el.value='';});
  alert('‚úÖ "'+w+'" a√±adida al vocabulario.');
}
function exportD(){doBackup(false);}
function importD(){
  try{
    const txt=document.getElementById('ijson').value;
    const d=JSON.parse(txt);
    Object.assign(S,d);
    S.todaySeen=new Set(d.todaySeen||[]);
    save();alert('‚úÖ Progreso importado correctamente.');goTo('home');
  }catch(e){alert('Error al importar. Verifica el JSON.');}
}
function resetP(){
  if(!confirm('¬øBorrar TODO el progreso? No se puede deshacer.'))return;
  S.srs={};S.vSRS={};S.todaySeen=new Set();
  S.stats={streak:0,lastDate:'',seen:0,correct:0};S.aiDecks={};
  save();renderHome();alert('Progreso reiniciado. ¬°A empezar de cero, Noemi! üí™');
}


// ‚ïê‚ïê‚ïê T√âRMINOS Y CONDICIONES ‚ïê‚ïê‚ïê
function checkTOS(){
  if(!S.tosAccepted){
    document.getElementById('tos-overlay').classList.remove('hidden');
  }
}
function acceptTOS(){
  S.tosAccepted=true;
  S.tosDate=new Date().toLocaleString('es-ES');
  save();
  document.getElementById('tos-overlay').classList.add('hidden');
  // Update TOS screen status
  const statusEl=document.getElementById('tos-status');
  const dateEl=document.getElementById('tos-date');
  if(statusEl)statusEl.textContent='‚úÖ Aceptado ‚Äî incluyendo el 5% en bruto';
  if(dateEl)dateEl.textContent='Fecha de aceptaci√≥n: '+S.tosDate;
}
function exportTOS(){
  const ua=navigator.userAgent;
  const device=ua.includes('iPhone')?'iPhone':ua.includes('Android')?'Android':ua.includes('iPad')?'iPad':'Ordenador';
  const browser=ua.includes('Chrome')?'Chrome':ua.includes('Safari')?'Safari':ua.includes('Firefox')?'Firefox':'Navegador web';
  const txt=`ACUERDO DE LICENCIA DE USUARIO FINAL ‚Äî PASAPALABRA PRO
========================================================
Fecha de aceptaci√≥n: ${S.tosDate||'No registrada'}
Aceptado desde: ${device} ¬∑ ${browser}
Identificador de sesi√≥n: ${SK}-${S.tosDate?btoa(S.tosDate).slice(0,12):'N/A'}
Versi√≥n: 5.0

PARTES DEL ACUERDO
- LA INVENTORA: Andrea Alacreu Fern√°ndez
- LA USUARIA:   Noemi Folgado Molina
- Aceptaci√≥n:   Mediante pulsaci√≥n del bot√≥n "Acepto y entiendo" en la aplicaci√≥n
                PasaPalabra Pro, con plena conciencia y voluntariedad.

CL√ÅUSULA 1 ‚Äî AUTOR√çA
PasaPalabra Pro ha sido concebida, dise√±ada e impulsada intelectualmente por Andrea Alacreu Fern√°ndez
(la "Inventora"), quien ostenta la titularidad moral e intelectual de la idea originaria.

CL√ÅUSULA 2 ‚Äî LICENCIA DE USO
Licencia personal e intransferible otorgada a Noemi Folgado Molina (la "Usuaria") para uso privado
con finalidad de preparaci√≥n para concursos, en particular Pasapalabra.

CL√ÅUSULA 3 ‚Äî CONTRAPRESTACI√ìN ECON√ìMICA (EL 5%)
La Usuaria se compromete irrevocablemente a abonar a la Inventora el CINCO POR CIENTO (5%)
del importe √çNTEGRO Y BRUTO de cualquier premio econ√≥mico obtenido en cualquier concurso
de televisi√≥n, radio, plataforma digital o evento p√∫blico.
ANTES DE IMPUESTOS. ANTES DE RETENCIONES. ANTES DE CUALQUIER DEDUCCI√ìN.
Plazo de pago: 30 d√≠as naturales desde la obtenci√≥n del premio.

CL√ÅUSULA 4 ‚Äî INTER√âS DE DEMORA
El retraso devengar√° un inter√©s del 8% anual (Ley 3/2004).

CL√ÅUSULA 5 ‚Äî JURISDICCI√ìN
Juzgados y Tribunales de Valencia. Plena eficacia contractual.

CL√ÅUSULA 6 ‚Äî BUEN ROLLO
Celebraci√≥n conjunta del bote con cena de lujo incluida en el premio.

========================================================
Este documento fue generado autom√°ticamente por PasaPalabra Pro y puede ser
presentado como prueba documental en procedimiento judicial o arbitral.`;
  const b=new Blob([txt],{type:'text/plain'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(b);
  a.download='PasaPalabraPro_Contrato_5pct_'+new Date().toISOString().slice(0,10)+'.txt';
  a.click();
}

// ‚ïê‚ïê‚ïê BOOT ‚Äî DOMContentLoaded garantiza no pantalla en blanco ‚ïê‚ïê‚ïê
function initApp(){
  load();
  checkDayReset();
  goTo('home');
  // TOS check after short delay so home renders first
  setTimeout(checkTOS, 400);
  // Update TOS screen date if already accepted
  const dateEl=document.getElementById('tos-date');
  if(dateEl&&S.tosDate)dateEl.textContent='Fecha de aceptaci√≥n: '+S.tosDate;
}
if(document.readyState==='loading'){
  document.addEventListener('DOMContentLoaded',initApp);
}else{
  initApp();
}

</script>
</body>
</html>
